{
  "tests": [
    {
      "title": "Simple Nested Pie Chart Report Test",
      "input": {
        "timestamp": [
          "2024-01-01T09:00:00",
          "2024-01-01T10:00:00",
          "2024-01-01T11:00:00",
          "2024-01-01T12:00:00",
          "2024-01-01T13:00:00",
          "2024-01-01T14:00:00",
          "2024-01-01T15:00:00",
          "2024-01-01T16:00:00"
        ],
        "portfolio#asset_class": [
          "Stocks",
          "Stocks",
          "Bonds",
          "Bonds",
          "Cash",
          "Stocks",
          "Bonds",
          "Cash"
        ],
        "portfolio#region": [
          "US",
          "Europe",
          "US",
          "Asia",
          "US",
          "Asia",
          "Europe",
          "Europe"
        ],
        "portfolio#allocation": [
          40.0,
          25.0,
          15.0,
          10.0,
          5.0,
          20.0,
          12.0,
          8.0
        ]
      },
      "expect": {
        "type": "tearsheet",
        "charts": [
          {
            "title": "Portfolio Allocation",
            "category": "Charts",
            "type": "WidgetNestedPieChart",
            "series": [
              {
                "name": "portfolio#region",
                "size": 80,
                "inner_size": 60,
                "data": [
                  {
                    "name": "US",
                    "y": 44.44444444444444
                  },
                  {
                    "name": "Europe",
                    "y": 33.333333333333336
                  },
                  {
                    "name": "Asia",
                    "y": 22.22222222222222
                  }
                ]
              },
              {
                "name": "portfolio#asset_class",
                "size": 45,
                "inner_size": 0,
                "data": [
                  {
                    "name": "Stocks",
                    "y": 62.96296296296296
                  },
                  {
                    "name": "Bonds",
                    "y": 27.407407407407405
                  },
                  {
                    "name": "Cash",
                    "y": 9.629629629629629
                  }
                ]
              }
            ]
          }
        ]
      },
      "options": {
        "transform_name": "nested_pie_chart_report",
        "title": "Portfolio Allocation",
        "category": "Charts",
        "output_id": "test_nested_pie_chart",
        "inputs": "{inner_label: portfolio#asset_class, outer_label: portfolio#region, value: portfolio#allocation}",
        "timeframe": "1D"
      },
      "timestamp_columns": [
        "timestamp"
      ],
      "index_column": "timestamp"
    }
  ]
}
