{
  "tests": [
    {
      "title": "Lines Chart Report with SQL Aggregation",
      "input": {
        "timestamp": [
          "2024-01-01T09:00:00",
          "2024-01-01T09:01:00",
          "2024-01-01T09:02:00",
          "2024-01-01T09:03:00",
          "2024-01-01T09:04:00",
          "2024-01-01T09:05:00",
          "2024-01-01T09:06:00"
        ],
        "strategy#returns": [
          0.05,
          -0.02,
          0.03,
          0.08,
          -0.01,
          0.04,
          0.02
        ],
        "risk_model#volatility": [
          0.15,
          0.15,
          0.2,
          0.2,
          0.18,
          0.18,
          0.22
        ],
        "portfolio#sector": [
          "tech",
          "finance",
          "tech",
          "finance",
          "energy",
          "energy",
          "tech"
        ],
        "analysis#time_period": [
          1.0,
          1.0,
          2.0,
          2.0,
          3.0,
          3.0,
          4.0
        ]
      },
      "expect": {
        "type": "tearsheet",
        "charts": [
          {
            "title": "Average Returns by Time Period",
            "category": "Charts",
            "type": "WidgetLinesChart",
            "x_axis": {
              "data": [
                1.0,
                2.0,
                3.0,
                4.0
              ],
              "type": "TypeDecimal"
            },
            "lines": [
              {
                "name": "avg_return",
                "data": [
                  0.015,
                  0.055,
                  0.015,
                  0.02
                ],
                "type": "TypeDecimal"
              }
            ]
          }
        ]
      },
      "options": {
        "transform_name": "lines_chart_report",
        "sql": "SELECT analysis_time_period as x_axis, AVG(strategy_returns) as avg_return FROM input GROUP BY analysis_time_period ORDER BY analysis_time_period",
        "table_name": "input",
        "title": "Average Returns by Time Period",
        "x_axis_column": "x_axis",
        "y_value_column": "avg_return",
        "x_axis_title": "Time Period",
        "y_axis_title": "Average Return",
        "output_id": "test_agg_lines_chart",
        "use_index": true,
        "index_column": "timestamp",
        "inputs": "{SLOT: [strategy#returns, risk_model#volatility, portfolio#sector, analysis#time_period]}",
        "timeframe": "1D"
      },
      "timestamp_columns": [
        "timestamp"
      ],
      "index_column": "timestamp"
    }
  ]
}