{
  "id": "volatility_filtered_klinger_oscillator",
  "name": "Volatility Filtered Klinger Oscillator",
  "description": "This strategy utilizes the Klinger Oscillator to identify potential buy and sell signals while filtering out market volatility. By adjusting the fast and slow lengths of the oscillator, traders can optimize their entries and exits for improved performance.",
  "algorithm_type": "TechnicalPattern",
  "prompt": "//@version=5\nstrategy(\"Volatility-Filtered Klinger Oscillator Strategy\", overlay=true, initial_capital=10000, default_qty_type=strategy.percent_of_equity, default_qty_value=10)\n\n// Input parameters\nklinger_fast = input.int(34, minval=1, title=\"Klinger Fast Length\")\nklinger_slow = input.int(55, minval=1, title=\"Klinger Slow Length\")\nklinger_signal = input.int(13, minval=1, title=\"Klinger Signal Length\")\nvolatility_length = input.int(21, minval=1, title=\"Volatility Length\")\nvolatility_threshold = input.float(0.0065, step=0.0001, title=\"Min Volatility Threshold (ATR/Price)\")\n\n// Calculate Typical Price and Volume\ntyp_price = ta.typical_price\nvol = volume\n\n// Calculate Klinger Oscillator components\n// Daily Volume Force (VF) calculation with directional volume\nmax_high_low = math.max(high - low, math.max(math.abs(high - nz(typ_price[1])), math.abs(low - nz(typ_price[1]))))\ntrend = 0.0\ntrend := typ_price > nz(typ_price[1]) ? 1 : typ_price < nz(typ_price[1]) ? -1 : nz(trend[1], 0)\ndm = vol * (high - low) * trend\ncm_fast = ta.ema(dm, klinger_fast)\ncm_slow = ta.ema(dm, klinger_slow)\nklinger = cm_fast - cm_slow\nsignal = ta.ema(klinger, klinger_signal)\n\n// Volatility filter via ATR normalized by close price\natr_val = ta.atr(volatility_length)\nvolatility_ratio = atr_val / close\n\n// Entry Conditions\nlong_cond = ta.crossover(klinger, signal) and volatility_ratio > volatility_threshold\nshort_cond = ta.crossunder(klinger, signal) and volatility_ratio > volatility_threshold\n\n// Exit Conditions: Opposite Signal or Volatility Drop\nexit_long_cond = ta.crossunder(klinger, signal) or volatility_ratio <= volatility_threshold\nexit_short_cond = ta.crossover(klinger, signal) or volatility_ratio <= volatility_threshold\n\n// Execute trades\nif long_cond\n    strategy.entry(\"Long\", strategy.long)\nif exit_long_cond\n    strategy.close(\"Long\")\nif short_cond\n    strategy.entry(\"Short\", strategy.short)\nif exit_short_cond\n    strategy.close(\"Short\")\n\n// Plot Klinger Oscillator and Signal\nplot(klinger, color=color.new(color.blue, 0), title=\"Klinger Oscillator\")\nplot(signal, color=color.new(color.orange, 0), title=\"Signal Line\")\n\n// Plot Volatility ratio and threshold for visual reference\nplot(volatility_ratio, color=color.new(color.purple, 50), title=\"Volatility Ratio (ATR/Price)\")\nhline(volatility_threshold, color=color.new(color.red, 70), title=\"Volatility Threshold\")",
  "blueprint": {
    "nodes": [
      {
        "id": "adosc",
        "type": "adosc",
        "options": [
          {
            "id": "short_period",
            "value": 34,
            "name": "Fast Length",
            "isExposed": true
          },
          {
            "id": "long_period",
            "value": 55,
            "name": "Slow Length",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "day",
          "interval": 1
        }
      },
      {
        "id": "ema",
        "type": "ema",
        "options": [
          {
            "id": "period",
            "value": 13,
            "name": "Signal Length",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "natr",
        "type": "natr",
        "options": [
          {
            "id": "period",
            "value": 21,
            "name": "Volatility Length",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "day",
          "interval": 1
        }
      },
      {
        "id": "thr",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 0.0065,
            "name": "Volatility Threshold",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lte",
        "type": "lte",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "cross_up",
        "type": "crossover",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "cross_down",
        "type": "crossover",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "and_long",
        "type": "logical_and",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "and_short",
        "type": "logical_and",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "or_exit_long",
        "type": "logical_or",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "or_exit_short",
        "type": "logical_or",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "any_exit",
        "type": "agg_any_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "executor",
        "type": "trade_signal_executor",
        "options": [
          {
            "id": "closeIfIndecisive",
            "value": false,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      }
    ],
    "edges": [
      {
        "source": {
          "id": "adosc",
          "handle": "result"
        },
        "target": {
          "id": "ema",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "adosc",
          "handle": "result"
        },
        "target": {
          "id": "cross_up",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "ema",
          "handle": "result"
        },
        "target": {
          "id": "cross_up",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "ema",
          "handle": "result"
        },
        "target": {
          "id": "cross_down",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "adosc",
          "handle": "result"
        },
        "target": {
          "id": "cross_down",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "natr",
          "handle": "result"
        },
        "target": {
          "id": "gt",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "thr",
          "handle": "result"
        },
        "target": {
          "id": "gt",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "natr",
          "handle": "result"
        },
        "target": {
          "id": "lte",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "thr",
          "handle": "result"
        },
        "target": {
          "id": "lte",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "cross_up",
          "handle": "result"
        },
        "target": {
          "id": "and_long",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "gt",
          "handle": "result"
        },
        "target": {
          "id": "and_long",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "cross_down",
          "handle": "result"
        },
        "target": {
          "id": "and_short",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "gt",
          "handle": "result"
        },
        "target": {
          "id": "and_short",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "cross_down",
          "handle": "result"
        },
        "target": {
          "id": "or_exit_long",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "lte",
          "handle": "result"
        },
        "target": {
          "id": "or_exit_long",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "cross_up",
          "handle": "result"
        },
        "target": {
          "id": "or_exit_short",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "lte",
          "handle": "result"
        },
        "target": {
          "id": "or_exit_short",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "or_exit_long",
          "handle": "result"
        },
        "target": {
          "id": "any_exit",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "or_exit_short",
          "handle": "result"
        },
        "target": {
          "id": "any_exit",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "and_long",
          "handle": "result"
        },
        "target": {
          "id": "executor",
          "handle": "long"
        }
      },
      {
        "source": {
          "id": "and_short",
          "handle": "result"
        },
        "target": {
          "id": "executor",
          "handle": "short"
        }
      },
      {
        "source": {
          "id": "any_exit",
          "handle": "result"
        },
        "target": {
          "id": "executor",
          "handle": "close"
        }
      }
    ]
  },
  "timestamp": "2025-06-23T14:54:14.950432",
  "tags": [
    "Klinger Oscillator",
    "Volatility",
    "Technical Analysis",
    "Trading Strategy",
    "Momentum"
  ]
}