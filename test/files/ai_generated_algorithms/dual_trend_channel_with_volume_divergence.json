{
  "id": "dual_trend_channel_volume_divergence",
  "name": "Dual Trend Channel with Volume Divergence",
  "description": "This strategy utilizes a dual trend channel to identify potential breakout points while incorporating volume divergence as a confirmation tool. It aims to enhance trade entries and exits based on price action and volume analysis.",
  "algorithm_type": "TechnicalPattern",
  "prompt": "// @version=5\nstrategy(\"Dual Trend Channel + Volume Divergence Strategy\", overlay=true, max_bars_back=200)\n\n// === INPUTS ===\ndonchian_len = input.int(20, minval=2, title=\"Donchian Channel Length\")\nema_len = input.int(50, minval=2, title=\"EMA Length\")\nvol_sma_len = input.int(20, title=\"Volume SMA Length\")\nvol_div_factor = input.float(0.8, minval=0.1, maxval=2.0, title=\"Volume Divergence Threshold (Pct of SMA)\")\natr_len = input.int(14, title=\"ATR Length\")\natr_mult = input.float(1.5, title=\"ATR Stop Loss Multiplier\")\n\n// === DONCHIAN CHANNEL ===\ndonchian_high = ta.highest(high, donchian_len)\ndonchian_low = ta.lowest(low, donchian_len)\nmidline = (donchian_high + donchian_low) / 2\n\n// === EMA FOR TREND FILTER ===\nema = ta.ema(close, ema_len)\n\n// === VOLUME DIVERGENCE ===\nvol_sma = ta.sma(volume, vol_sma_len)\nvol_div_long = volume < vol_sma * vol_div_factor and close > midline and close > ema\nvol_div_short = volume < vol_sma * vol_div_factor and close < midline and close < ema\n\n// === ENTRY CONDITIONS ===\nlong_breakout = ta.crossover(close, donchian_high)\nshort_breakdown = ta.crossunder(close, donchian_low)\n\n// Confirm breakout is on \"weak\" volume, i.e., possible hidden strength (contrarian filter)\nlong_entry = long_breakout and vol_div_long\nshort_entry = short_breakdown and vol_div_short\n\n// === ATR STOP LOSS & EXIT PARAMETERS ===\natr = ta.atr(atr_len)\nlong_stop = close - atr * atr_mult\nshort_stop = close + atr * atr_mult\n\n// === STRATEGY EXECUTION ===\nif long_entry\n    strategy.entry(\"Long\", strategy.long)\n    strategy.exit(\"Long Exit\", \"Long\", stop=long_stop)\n\nif short_entry\n    strategy.entry(\"Short\", strategy.short)\n    strategy.exit(\"Short Exit\", \"Short\", stop=short_stop)\n\n// === PLOTS ===\nplot(donchian_high, color=color.green, linewidth=1, title=\"Donchian High\")\nplot(donchian_low, color=color.red, linewidth=1, title=\"Donchian Low\")\nplot(ema, color=color.purple, linewidth=1, title=\"EMA\")\nplot(midline, color=color.gray, linewidth=1, title=\"Donchian Midline\")\nplot(vol_sma, color=color.orange, style=plot.style_columns, linewidth=1, title=\"Volume SMA\", overlay=false)",
  "blueprint": {
    "nodes": [
      {
        "id": "m1",
        "type": "market_data_source",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "day",
          "interval": 1
        }
      },
      {
        "id": "dh1",
        "type": "max",
        "options": [
          {
            "id": "period",
            "value": 20,
            "name": "Donchian Length",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "dl1",
        "type": "min",
        "options": [
          {
            "id": "period",
            "value": 20,
            "name": "Donchian Length",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "add1",
        "type": "add",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n2c",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 2,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "div1",
        "type": "div",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "ema1",
        "type": "ema",
        "options": [
          {
            "id": "period",
            "value": 50,
            "name": "EMA Length",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "sma1",
        "type": "sma",
        "options": [
          {
            "id": "period",
            "value": 20,
            "name": "Volume SMA Length",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n08c",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 0.8,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "mul1",
        "type": "mul",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lt_volume",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_close_mid",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_close_ema",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "filter_long",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_close_donhigh",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "long_entry",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lt_close_donlow",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lt_close_mid",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lt_close_ema",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "filter_short",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "short_entry",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "executor",
        "type": "trade_signal_executor",
        "options": [
          {
            "id": "closeIfIndecisive",
            "value": false,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      }
    ],
    "edges": [
      {
        "source": {
          "id": "m1",
          "handle": "h"
        },
        "target": {
          "id": "dh1",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "m1",
          "handle": "l"
        },
        "target": {
          "id": "dl1",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "dh1",
          "handle": "result"
        },
        "target": {
          "id": "add1",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "dl1",
          "handle": "result"
        },
        "target": {
          "id": "add1",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "add1",
          "handle": "result"
        },
        "target": {
          "id": "div1",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "n2c",
          "handle": "result"
        },
        "target": {
          "id": "div1",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "m1",
          "handle": "c"
        },
        "target": {
          "id": "ema1",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "m1",
          "handle": "c"
        },
        "target": {
          "id": "gt_close_mid",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "div1",
          "handle": "result"
        },
        "target": {
          "id": "gt_close_mid",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "m1",
          "handle": "c"
        },
        "target": {
          "id": "gt_close_ema",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "ema1",
          "handle": "result"
        },
        "target": {
          "id": "gt_close_ema",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "m1",
          "handle": "v"
        },
        "target": {
          "id": "sma1",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "sma1",
          "handle": "result"
        },
        "target": {
          "id": "mul1",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "n08c",
          "handle": "result"
        },
        "target": {
          "id": "mul1",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "m1",
          "handle": "v"
        },
        "target": {
          "id": "lt_volume",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "mul1",
          "handle": "result"
        },
        "target": {
          "id": "lt_volume",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "lt_volume",
          "handle": "result"
        },
        "target": {
          "id": "filter_long",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_close_mid",
          "handle": "result"
        },
        "target": {
          "id": "filter_long",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_close_ema",
          "handle": "result"
        },
        "target": {
          "id": "filter_long",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "m1",
          "handle": "c"
        },
        "target": {
          "id": "gt_close_donhigh",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "dh1",
          "handle": "result"
        },
        "target": {
          "id": "gt_close_donhigh",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "gt_close_donhigh",
          "handle": "result"
        },
        "target": {
          "id": "long_entry",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "filter_long",
          "handle": "result"
        },
        "target": {
          "id": "long_entry",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "m1",
          "handle": "c"
        },
        "target": {
          "id": "lt_close_donlow",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "dl1",
          "handle": "result"
        },
        "target": {
          "id": "lt_close_donlow",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "m1",
          "handle": "c"
        },
        "target": {
          "id": "lt_close_mid",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "div1",
          "handle": "result"
        },
        "target": {
          "id": "lt_close_mid",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "m1",
          "handle": "c"
        },
        "target": {
          "id": "lt_close_ema",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "ema1",
          "handle": "result"
        },
        "target": {
          "id": "lt_close_ema",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "lt_volume",
          "handle": "result"
        },
        "target": {
          "id": "filter_short",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "lt_close_mid",
          "handle": "result"
        },
        "target": {
          "id": "filter_short",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "lt_close_ema",
          "handle": "result"
        },
        "target": {
          "id": "filter_short",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "lt_close_donlow",
          "handle": "result"
        },
        "target": {
          "id": "short_entry",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "filter_short",
          "handle": "result"
        },
        "target": {
          "id": "short_entry",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "long_entry",
          "handle": "result"
        },
        "target": {
          "id": "executor",
          "handle": "long"
        }
      },
      {
        "source": {
          "id": "short_entry",
          "handle": "result"
        },
        "target": {
          "id": "executor",
          "handle": "short"
        }
      }
    ]
  },
  "timestamp": "2025-06-23T15:05:07.164305",
  "tags": [
    "technical",
    "trend",
    "volume",
    "divergence",
    "strategy"
  ]
}