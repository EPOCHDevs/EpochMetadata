{
  "id": "sfp_price_action_001",
  "name": "Swing Failure Pattern Price Action",
  "description": "This algorithm identifies swing failure patterns (SFP) on the 1-hour timeframe. It detects when the price briefly breaks the previous swing high or low by at least 0.1% but closes back inside the previous range within the same candle, triggering an entry at the close of the SFP candle.",
  "algorithm_type": "PriceAction",
  "prompt": "Design an intermediate PriceAction trading algorithm in Python that identifies swing failure patterns (SFP) on the 1-hour timeframe. The algorithm should detect when price briefly breaks the previous swing high (for shorts) or swing low (for longs) by at least 0.1% but closes back inside the previous range within the same candle. Entry is triggered at the close of the SFP candle, with a stop-loss just above/below the wick and a take-profit at 2x the risk. Confirm the pattern occurs with above-average volume (greater than the 21-period moving average of volume). Implement explicit logic for identifying swing highs/lows and validating SFPs, and only take trades if the 50-period moving average is aligned with the direction of the trade (price below MA for shorts, above for longs).",
  "blueprint": {
    "nodes": [
      {
        "id": "src",
        "type": "market_data_source",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "smaVol",
        "type": "sma",
        "options": [
          {
            "id": "period",
            "value": 21,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gtVol",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "sma50",
        "type": "sma",
        "options": [
          {
            "id": "period",
            "value": 50,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gtPriceMA",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "ltPriceMA",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "prevHL",
        "type": "previous_high_low",
        "options": [
          {
            "id": "interval",
            "value": 1,
            "name": "",
            "isExposed": false
          },
          {
            "id": "type",
            "value": "hour",
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gtClosePrevLow",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "ltClosePrevHigh",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "longAll",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "shortAll",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "exec",
        "type": "trade_signal_executor",
        "options": [
          {
            "id": "closeIfIndecisive",
            "value": false,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      }
    ],
    "edges": [
      {
        "source": {
          "id": "src",
          "handle": "v"
        },
        "target": {
          "id": "smaVol",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "src",
          "handle": "v"
        },
        "target": {
          "id": "gtVol",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "smaVol",
          "handle": "result"
        },
        "target": {
          "id": "gtVol",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "src",
          "handle": "c"
        },
        "target": {
          "id": "sma50",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "src",
          "handle": "c"
        },
        "target": {
          "id": "gtPriceMA",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "sma50",
          "handle": "result"
        },
        "target": {
          "id": "gtPriceMA",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "src",
          "handle": "c"
        },
        "target": {
          "id": "ltPriceMA",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "sma50",
          "handle": "result"
        },
        "target": {
          "id": "ltPriceMA",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "prevHL",
          "handle": "previous_low"
        },
        "target": {
          "id": "gtClosePrevLow",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "src",
          "handle": "c"
        },
        "target": {
          "id": "gtClosePrevLow",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "prevHL",
          "handle": "previous_high"
        },
        "target": {
          "id": "ltClosePrevHigh",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "src",
          "handle": "c"
        },
        "target": {
          "id": "ltClosePrevHigh",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "gtVol",
          "handle": "result"
        },
        "target": {
          "id": "longAll",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gtPriceMA",
          "handle": "result"
        },
        "target": {
          "id": "longAll",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gtClosePrevLow",
          "handle": "result"
        },
        "target": {
          "id": "longAll",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "prevHL",
          "handle": "broken_low"
        },
        "target": {
          "id": "longAll",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gtVol",
          "handle": "result"
        },
        "target": {
          "id": "shortAll",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "ltPriceMA",
          "handle": "result"
        },
        "target": {
          "id": "shortAll",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "ltClosePrevHigh",
          "handle": "result"
        },
        "target": {
          "id": "shortAll",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "prevHL",
          "handle": "broken_high"
        },
        "target": {
          "id": "shortAll",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "longAll",
          "handle": "result"
        },
        "target": {
          "id": "exec",
          "handle": "long"
        }
      },
      {
        "source": {
          "id": "shortAll",
          "handle": "result"
        },
        "target": {
          "id": "exec",
          "handle": "short"
        }
      }
    ]
  },
  "timestamp": "2025-06-17T10:49:05.318472",
  "tags": [
    "PriceAction",
    "SFP",
    "SwingTrading",
    "Algorithm",
    "TradingStrategy"
  ]
}