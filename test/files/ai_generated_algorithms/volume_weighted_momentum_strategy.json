{
  "id": "momentum_volume_weighted_strategy",
  "name": "Volume-Weighted Momentum Strategy",
  "description": "This trading strategy utilizes the Commodity Channel Index (CCI) to identify price extremes while incorporating a volume-weighted RSI to assess momentum. Additionally, an adaptive volume spike filter is employed to enhance volatility breakout detection, ensuring more robust trading signals.",
  "algorithm_type": "Momentum",
  "prompt": "import pandas as pd\nimport numpy as np\nimport talib\n\ndef trading_strategy(data):\n    \"\"\"\n    Unique trading strategy combining CCI with Volume-Weighted RSI and Volume Spike Filter.\n    Uses:\n    - Commodity Channel Index (CCI) to detect price extremes.\n    - RSI calculated on volume-weighted price to gauge momentum incorporating volume.\n    - Adaptive volume spike filter as a volatility breakout confirmation.\n    Entries:\n    - Buy when CCI crosses above -100, volume-weighted RSI < 30, and volume spike occurs.\n    - Sell when CCI crosses below 100, volume-weighted RSI > 70, and volume spike occurs.\n    \"\"\"\n\n    # Ensure 'volume' and OHLC keys exist\n    o = data['open']\n    h = data['high']\n    l = data['low']\n    c = data['close']\n    v = data['volume']\n\n    # Typical price\n    tp = (h + l + c) / 3\n\n    # Volume Weighted Price Series\n    vwp = tp * v\n    # VW-Price rolling mean over 14 periods\n    vwp_ma = vwp.rolling(window=14).sum() / v.rolling(window=14).sum()\n    # Compute RSI on volume weighted price (vwp_ma), period 14\n    vw_rsi = talib.RSI(vwp_ma.fillna(method='ffill').values, timeperiod=14)\n\n    data['vw_rsi'] = vw_rsi\n\n    # Compute CCI with 20 period (constant 0.015)\n    cci = talib.CCI(h.values, l.values, c.values, timeperiod=20)\n    data['cci'] = cci\n\n    # Volume Spike Filter\n    # Volume spike if volume today > 1.75 * rolling mean volume(20)\n    vol_ma20 = v.rolling(window=20).mean()\n    volume_spike = v > 1.75 * vol_ma20\n    data['volume_spike'] = volume_spike\n\n    # Generate signals\n    data['signal'] = 0\n\n    # CCI cross above -100 condition\n    cci_cross_above_neg100 = (data['cci'].shift(1) < -100) & (data['cci'] > -100)\n    # CCI cross below 100 condition\n    cci_cross_below_pos100 = (data['cci'].shift(1) > 100) & (data['cci'] < 100)\n\n    # Entry Long Signal: CCI cross above -100, VW RSI < 30, volume spike\n    long_signal = cci_cross_above_neg100 & (data['vw_rsi'] < 30) & volume_spike\n\n    # Exit Long / Short Signal: CCI cross below 100, VW RSI > 70, volume spike\n    short_signal = cci_cross_below_pos100 & (data['vw_rsi'] > 70) & volume_spike\n\n    data.loc[long_signal, 'signal'] = 1\n    data.loc[short_signal, 'signal'] = -1\n\n    return data.reset_index(drop=True)",
  "blueprint": {
    "nodes": [
      {
        "id": "n1",
        "type": "market_data_source",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "day",
          "interval": 1
        }
      },
      {
        "id": "n2",
        "type": "typprice",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n3",
        "type": "mul",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n4",
        "type": "sum",
        "options": [
          {
            "id": "period",
            "value": 14,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n5",
        "type": "sum",
        "options": [
          {
            "id": "period",
            "value": 14,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n6",
        "type": "div",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n7",
        "type": "rsi",
        "options": [
          {
            "id": "period",
            "value": 14,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n8",
        "type": "cci",
        "options": [
          {
            "id": "period",
            "value": 20,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n9",
        "type": "lag",
        "options": [
          {
            "id": "period",
            "value": 1,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n10",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": -100,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n11",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 100,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n12",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 30,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n13",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 70,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n14",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n15",
        "type": "gte",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n16",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n17",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n18",
        "type": "lte",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n19",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n20",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n21",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n22",
        "type": "sma",
        "options": [
          {
            "id": "period",
            "value": 20,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n23",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 1.75,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n24",
        "type": "mul",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n25",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n26",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n27",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "n28",
        "type": "trade_signal_executor",
        "options": [
          {
            "id": "closeIfIndecisive",
            "value": false,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      }
    ],
    "edges": [
      {
        "source": {
          "id": "n2",
          "handle": "result"
        },
        "target": {
          "id": "n3",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "n1",
          "handle": "v"
        },
        "target": {
          "id": "n3",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "n3",
          "handle": "result"
        },
        "target": {
          "id": "n4",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n4",
          "handle": "result"
        },
        "target": {
          "id": "n6",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "n1",
          "handle": "v"
        },
        "target": {
          "id": "n5",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n5",
          "handle": "result"
        },
        "target": {
          "id": "n6",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "n6",
          "handle": "result"
        },
        "target": {
          "id": "n7",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n7",
          "handle": "result"
        },
        "target": {
          "id": "n20",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "n12",
          "handle": "result"
        },
        "target": {
          "id": "n20",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "n7",
          "handle": "result"
        },
        "target": {
          "id": "n21",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "n13",
          "handle": "result"
        },
        "target": {
          "id": "n21",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "n1",
          "handle": "v"
        },
        "target": {
          "id": "n22",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n22",
          "handle": "result"
        },
        "target": {
          "id": "n24",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "n23",
          "handle": "result"
        },
        "target": {
          "id": "n24",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "n1",
          "handle": "v"
        },
        "target": {
          "id": "n25",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "n24",
          "handle": "result"
        },
        "target": {
          "id": "n25",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "n8",
          "handle": "result"
        },
        "target": {
          "id": "n9",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n9",
          "handle": "result"
        },
        "target": {
          "id": "n14",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "n10",
          "handle": "result"
        },
        "target": {
          "id": "n14",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "n8",
          "handle": "result"
        },
        "target": {
          "id": "n15",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "n10",
          "handle": "result"
        },
        "target": {
          "id": "n15",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "n14",
          "handle": "result"
        },
        "target": {
          "id": "n16",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n15",
          "handle": "result"
        },
        "target": {
          "id": "n16",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n9",
          "handle": "result"
        },
        "target": {
          "id": "n17",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "n11",
          "handle": "result"
        },
        "target": {
          "id": "n17",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "n8",
          "handle": "result"
        },
        "target": {
          "id": "n18",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "n11",
          "handle": "result"
        },
        "target": {
          "id": "n18",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "n17",
          "handle": "result"
        },
        "target": {
          "id": "n19",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n18",
          "handle": "result"
        },
        "target": {
          "id": "n19",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n16",
          "handle": "result"
        },
        "target": {
          "id": "n26",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n20",
          "handle": "result"
        },
        "target": {
          "id": "n26",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n25",
          "handle": "result"
        },
        "target": {
          "id": "n26",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n19",
          "handle": "result"
        },
        "target": {
          "id": "n27",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n21",
          "handle": "result"
        },
        "target": {
          "id": "n27",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n25",
          "handle": "result"
        },
        "target": {
          "id": "n27",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "n26",
          "handle": "result"
        },
        "target": {
          "id": "n28",
          "handle": "long"
        }
      },
      {
        "source": {
          "id": "n27",
          "handle": "result"
        },
        "target": {
          "id": "n28",
          "handle": "short"
        }
      }
    ]
  },
  "timestamp": "2025-06-23T14:54:31.180905",
  "tags": [
    "momentum",
    "trading",
    "CCI",
    "RSI",
    "volume"
  ]
}