{
  "id": "adx_volume_surge_vwap_pullback",
  "name": "ADX Volume Surge VWAP Pullback",
  "description": "This strategy utilizes the Average Directional Index (ADX) to identify strong trends and combines it with a volume surge indicator. It aims to enter trades on pullbacks to the Volume Weighted Average Price (VWAP), enhancing the probability of successful trades.",
  "algorithm_type": "TechnicalPattern",
  "prompt": "// @version=5\nstrategy(\"ADX-Volume Surge with VWAP Pullback Strategy\", overlay=true, initial_capital=10000, default_qty_type=strategy.percent_of_equity, default_qty_value=10)\n\n// === Input Parameters ===\nadx_length      = input.int(14, title=\"ADX Length\")\nadx_threshold   = input.int(25, title=\"ADX Threshold\")\nvwap_pullback_pct = input.float(0.75, title=\"Pullback Distance to VWAP (%)\", minval=0.1, maxval=5)\nvolume_window   = input.int(20, title=\"Volume Moving Average Length\")\nvol_surge_mult  = input.float(2.0, title=\"Volume Surge Multiplier\", minval=1.1, maxval=10)\nstop_perc       = input.float(1.0, title=\"Stop Loss (%)\", minval=0.2, maxval=5)\ntake_perc       = input.float(2.0, title=\"Take Profit (%)\", minval=0.5, maxval=10)\n\n// === Indicator Calculations ===\nadx = ta.adx(adx_length)\nplus_di = ta.plus_di(adx_length)\nminus_di = ta.minus_di(adx_length)\nvwap = ta.vwap\n\nvol_ma = ta.sma(volume, volume_window)\nvol_surge = volume > vol_surge_mult * vol_ma\n\n// Calculate price distance to VWAP as a percent\ndist_to_vwap = 100 * (close - vwap) / vwap\n\n// === Long Condition ===\n// - ADX > threshold (strong trend)\n// - +DI > -DI (bullish trend)\n// - Volume surge vs MA\n// - Price previously extended above VWAP but is now pulling back closer to VWAP (within pullback pct)\nvw_ext = high[1] - vwap[1] > (vwap_pullback_pct/100) * vwap[1]\nvw_pullback = math.abs(close - vwap) < (vwap_pullback_pct/100) * vwap\n\nlong_condition = adx > adx_threshold and plus_di > minus_di and vol_surge and vw_ext and vw_pullback\n\n// === Short Condition ===\n// - ADX > threshold (strong trend)\n// - -DI > +DI (bearish trend)\n// - Volume surge vs MA\n// - Price previously extended below VWAP but is now pulling back in toward VWAP (within pullback pct)\nvw_ext_short = vwap[1] - low[1] > (vwap_pullback_pct/100) * vwap[1]\nvw_pullback_short = math.abs(close - vwap) < (vwap_pullback_pct/100) * vwap\n\nshort_condition = adx > adx_threshold and minus_di > plus_di and vol_surge and vw_ext_short and vw_pullback_short\n\n// === Trade Execution ===\nif long_condition\n    stop_price = close * (1 - stop_perc/100)\n    take_price = close * (1 + take_perc/100)\n    strategy.entry(\"Long\", strategy.long)\n    strategy.exit(\"Long TP/SL\", \"Long\", stop=stop_price, limit=take_price)\n\nif short_condition\n    stop_price = close * (1 + stop_perc/100)\n    take_price = close * (1 - take_perc/100)\n    strategy.entry(\"Short\", strategy.short)\n    strategy.exit(\"Short TP/SL\", \"Short\", stop=stop_price, limit=take_price)\n\n// === Visualization ===\nplot(vwap, color=color.orange, linewidth=2, title=\"VWAP\")\nhline(0, 'VWAP Distance', color=color.gray)\nplot(dist_to_vwap, title=\"Distance to VWAP (%)\", color=color.fuchsia, linewidth=1, offset=0, display=display.none)\nplot(vol_ma, color=color.aqua, title=\"Volume MA\")\nbgcolor(long_condition ? color.new(color.green, 85) : na)\nbgcolor(short_condition ? color.new(color.red, 85) : na)",
  "blueprint": {
    "nodes": [
      {
        "id": "src",
        "type": "market_data_source",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "minute",
          "interval": 1
        }
      },
      {
        "id": "adx1",
        "type": "adx",
        "options": [
          {
            "id": "period",
            "value": 14,
            "name": "ADX Period",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "minute",
          "interval": 1
        }
      },
      {
        "id": "di1",
        "type": "di",
        "options": [
          {
            "id": "period",
            "value": 14,
            "name": "DI Period",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "minute",
          "interval": 1
        }
      },
      {
        "id": "thr_num",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 25,
            "name": "ADX Threshold",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_trend",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_bull",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_bear",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "sma_vol",
        "type": "sma",
        "options": [
          {
            "id": "period",
            "value": 20,
            "name": "Volume MA Period",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "mult_const",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 2,
            "name": "Volume Surge Mult",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "mult_vol",
        "type": "mul",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_vol",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "ema1",
        "type": "ema",
        "options": [
          {
            "id": "period",
            "value": 21,
            "name": "EMA Period",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "diff",
        "type": "sub",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "absdiff",
        "type": "abs",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "pull_const",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 0.0075,
            "name": "Pullback %",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "allowed_mult",
        "type": "mul",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lte_pull",
        "type": "lte",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "agg_long",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "agg_short",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "exec",
        "type": "trade_signal_executor",
        "options": [
          {
            "id": "closeIfIndecisive",
            "value": false,
            "name": "Exit If Indecisive",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      }
    ],
    "edges": [
      {
        "source": {
          "id": "adx1",
          "handle": "result"
        },
        "target": {
          "id": "gt_trend",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "thr_num",
          "handle": "result"
        },
        "target": {
          "id": "gt_trend",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "di1",
          "handle": "plus_di"
        },
        "target": {
          "id": "gt_bull",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "di1",
          "handle": "minus_di"
        },
        "target": {
          "id": "gt_bull",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "di1",
          "handle": "minus_di"
        },
        "target": {
          "id": "gt_bear",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "di1",
          "handle": "plus_di"
        },
        "target": {
          "id": "gt_bear",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "src",
          "handle": "v"
        },
        "target": {
          "id": "sma_vol",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "sma_vol",
          "handle": "result"
        },
        "target": {
          "id": "mult_vol",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "mult_const",
          "handle": "result"
        },
        "target": {
          "id": "mult_vol",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "src",
          "handle": "v"
        },
        "target": {
          "id": "gt_vol",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "mult_vol",
          "handle": "result"
        },
        "target": {
          "id": "gt_vol",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "src",
          "handle": "c"
        },
        "target": {
          "id": "ema1",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "src",
          "handle": "c"
        },
        "target": {
          "id": "diff",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "ema1",
          "handle": "result"
        },
        "target": {
          "id": "diff",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "diff",
          "handle": "result"
        },
        "target": {
          "id": "absdiff",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "ema1",
          "handle": "result"
        },
        "target": {
          "id": "allowed_mult",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "pull_const",
          "handle": "result"
        },
        "target": {
          "id": "allowed_mult",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "absdiff",
          "handle": "result"
        },
        "target": {
          "id": "lte_pull",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "allowed_mult",
          "handle": "result"
        },
        "target": {
          "id": "lte_pull",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "gt_trend",
          "handle": "result"
        },
        "target": {
          "id": "agg_long",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_bull",
          "handle": "result"
        },
        "target": {
          "id": "agg_long",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_vol",
          "handle": "result"
        },
        "target": {
          "id": "agg_long",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "lte_pull",
          "handle": "result"
        },
        "target": {
          "id": "agg_long",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_trend",
          "handle": "result"
        },
        "target": {
          "id": "agg_short",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_bear",
          "handle": "result"
        },
        "target": {
          "id": "agg_short",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_vol",
          "handle": "result"
        },
        "target": {
          "id": "agg_short",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "lte_pull",
          "handle": "result"
        },
        "target": {
          "id": "agg_short",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "agg_long",
          "handle": "result"
        },
        "target": {
          "id": "exec",
          "handle": "long"
        }
      },
      {
        "source": {
          "id": "agg_short",
          "handle": "result"
        },
        "target": {
          "id": "exec",
          "handle": "short"
        }
      }
    ]
  },
  "timestamp": "2025-06-23T15:28:19.463319",
  "tags": [
    "ADX",
    "VWAP",
    "Volume",
    "Trend",
    "TechnicalPattern"
  ]
}