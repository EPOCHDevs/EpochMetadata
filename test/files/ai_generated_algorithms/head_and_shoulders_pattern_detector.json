{
  "id": "technicalpattern-001",
  "name": "Head and Shoulders Pattern Detector",
  "description": "This algorithm identifies Head and Shoulders and Inverse Head and Shoulders patterns on 4-hour candlestick charts. It utilizes swing high/low logic to automatically detect potential reversal points for short and long trades.",
  "algorithm_type": "TechnicalPattern",
  "prompt": "Design an expert-level TechnicalPattern trading algorithm using Pine Script that identifies the \"Head and Shoulders\" reversal pattern on 4-hour candlestick charts. The algorithm should automatically detect when a potential Head and Shoulders (for short trades) or Inverse Head and Shoulders (for long trades) forms using swing high/low logic: left shoulder, head (must be a higher high/lower low), and right shoulder (must closely mirror the left). Upon pattern confirmation (price closes below the neckline for short, above for long), enter positions with a stop loss above/below the right shoulder and a take profit equal to the neckline-to-head distance. Include a filter to only take trades when the 20-period Exponential Moving Average (EMA) crosses below (for short) or above (for long) the 50-period Simple Moving Average (SMA). Output clear, actionable long/short entry and exit signals.",
  "blueprint": {
    "nodes": [
      {
        "id": "mkt",
        "type": "market_data_source",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "ema20",
        "type": "ema",
        "options": [
          {
            "id": "period",
            "value": 20,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "sma50",
        "type": "sma",
        "options": [
          {
            "id": "period",
            "value": 50,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_trend",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lt_trend",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "swings",
        "type": "swing_highs_lows",
        "options": [
          {
            "id": "swing_length",
            "value": 5,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "bos",
        "type": "bos_choch",
        "options": [
          {
            "id": "close_break",
            "value": false,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "zero_const",
        "type": "zero",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_choch",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lt_choch",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "long_and",
        "type": "logical_and",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "short_and",
        "type": "logical_and",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "executor",
        "type": "trade_signal_executor",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      }
    ],
    "edges": [
      {
        "source": {
          "id": "mkt",
          "handle": "c"
        },
        "target": {
          "id": "ema20",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "mkt",
          "handle": "c"
        },
        "target": {
          "id": "sma50",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "ema20",
          "handle": "result"
        },
        "target": {
          "id": "gt_trend",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "sma50",
          "handle": "result"
        },
        "target": {
          "id": "gt_trend",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "ema20",
          "handle": "result"
        },
        "target": {
          "id": "lt_trend",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "sma50",
          "handle": "result"
        },
        "target": {
          "id": "lt_trend",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "swings",
          "handle": "high_low"
        },
        "target": {
          "id": "bos",
          "handle": "high_low"
        }
      },
      {
        "source": {
          "id": "swings",
          "handle": "level"
        },
        "target": {
          "id": "bos",
          "handle": "level"
        }
      },
      {
        "source": {
          "id": "bos",
          "handle": "choch"
        },
        "target": {
          "id": "gt_choch",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "zero_const",
          "handle": "result"
        },
        "target": {
          "id": "gt_choch",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "bos",
          "handle": "choch"
        },
        "target": {
          "id": "lt_choch",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "zero_const",
          "handle": "result"
        },
        "target": {
          "id": "lt_choch",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "gt_choch",
          "handle": "result"
        },
        "target": {
          "id": "long_and",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "gt_trend",
          "handle": "result"
        },
        "target": {
          "id": "long_and",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "lt_choch",
          "handle": "result"
        },
        "target": {
          "id": "short_and",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "lt_trend",
          "handle": "result"
        },
        "target": {
          "id": "short_and",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "long_and",
          "handle": "result"
        },
        "target": {
          "id": "executor",
          "handle": "long"
        }
      },
      {
        "source": {
          "id": "short_and",
          "handle": "result"
        },
        "target": {
          "id": "executor",
          "handle": "short"
        }
      }
    ]
  },
  "timestamp": "2025-06-17T10:44:00.273158",
  "tags": [
    "TechnicalPattern",
    "HeadAndShoulders",
    "TradingAlgorithm",
    "PineScript",
    "ReversalPatterns"
  ]
}