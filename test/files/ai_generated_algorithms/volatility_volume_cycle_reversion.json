{
  "id": "volatility-volume-cycle-reversion",
  "name": "Volatility-Volume Cycle Reversion",
  "description": "This strategy utilizes a combination of volatility and volume indicators to identify potential reversal points in the market. By analyzing the Average True Range (ATR) for volatility and an Exponential Moving Average (EMA) for volume, it aims to capitalize on cyclical price movements.",
  "algorithm_type": "TechnicalPattern",
  "prompt": "//@version=5\nstrategy(\"Volatility-Volume Cycle Reversion Strategy\", overlay=true, initial_capital=100000, default_qty_type=strategy.percent_of_equity, default_qty_value=10)\n\n// Input parameters\nlength_volatility = input.int(20, title=\"Volatility ATR Period\", minval=5)\nlength_volume = input.int(14, title=\"Volume EMA Period\", minval=5)\nlength_cycle = input.int(9, title=\"Cycle Length (for Hilbert Transform)\", minval=5, maxval=20)\nmultiplier = input.float(1.5, title=\"ATR Volatility Threshold Multiplier\", step=0.1)\n\n// Calculate Average True Range as volatility measure\natr_val = ta.atr(length_volatility)\n\n// Volume EMA to smooth volume\nvol_ema = ta.ema(volume, length_volume)\n\n// Hilbert Transform - dominant cycle period approximation\n// Use built-in ta.hlc3 for price input for cycle detection\nht = ta.ht_dcphase(ta.hlc3, length_cycle)\n\n// Cycle phase difference to detect turning points\n// Phase difference near zero or pi (~0 or 3.1415) marks cycle peaks/troughs\nis_cycle_top = math.abs(ht - math.pi) < 0.3\nis_cycle_bottom = ht < 0.3\n\n// Price volatility condition\nhigh_volatility = atr_val > multiplier * ta.sma(atr_val, length_volatility)\n\n// Volume surge detection - volume significantly above EMA of volume\nvol_surge = volume > 1.5 * vol_ema\n\n// Entry conditions:\n// Long Entry:\n//  - Cycle bottom detected (cycle phase near zero)\n//  - High volatility environment\n//  - Volume surge (buyers stepping in)\n// Exit Long:\n//  - Cycle top detected or price closes below lower volatility band\n//\n// Short Entry:\n//  - Cycle top detected (cycle phase near pi)\n//  - High volatility environment\n//  - Volume surge (sellers stepping in)\n// Exit Short:\n//  - Cycle bottom detected or price closes above upper volatility band\n\n// Volatility bands using ATR around close for dynamic stop/exits\nupper_band = close + atr_val\nlower_band = close - atr_val\n\nlong_entry = is_cycle_bottom and high_volatility and vol_surge\nshort_entry = is_cycle_top and high_volatility and vol_surge\n\nlong_exit = is_cycle_top or close < lower_band\nshort_exit = is_cycle_bottom or close > upper_band\n\n// Entries and exits\nif (long_entry)\n    strategy.entry(\"Long\", strategy.long)\nif (long_exit)\n    strategy.close(\"Long\")\n\nif (short_entry)\n    strategy.entry(\"Short\", strategy.short)\nif (short_exit)\n    strategy.close(\"Short\")\n\n// Plot cycle phase for visual confirmation\nplot(ht, title=\"Hilbert Cycle Phase\", color=color.orange)\nhline(0, \"Cycle Bottom\", color=color.green)\nhline(math.pi, \"Cycle Top\", color=color.red)\n\n// Plot ATR bands for reference\nplot(upper_band, color=color.red, title=\"Upper ATR Band\", style=plot.style_linebr)\nplot(lower_band, color=color.green, title=\"Lower ATR Band\", style=plot.style_linebr)\n\n// Plot Volume EMA\nplot(vol_ema, color=color.blue, title=\"Volume EMA\")\n\n// Background color for volume surge\nbgcolor(vol_surge ? color.new(color.blue, 85) : na)",
  "blueprint": {
    "nodes": [
      {
        "id": "mkt",
        "type": "market_data_source",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "minute",
          "interval": 1
        }
      },
      {
        "id": "num15",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 1.5,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "num30",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 30,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "num70",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 70,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "atr",
        "type": "atr",
        "options": [
          {
            "id": "period",
            "value": 20,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "minute",
          "interval": 1
        }
      },
      {
        "id": "smaATR",
        "type": "sma",
        "options": [
          {
            "id": "period",
            "value": 20,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "mulATR",
        "type": "mul",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gtVol",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "emaVol",
        "type": "ema",
        "options": [
          {
            "id": "period",
            "value": 14,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "mulVol",
        "type": "mul",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gtVolSurge",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "rsi",
        "type": "rsi",
        "options": [
          {
            "id": "period",
            "value": 14,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lteBottom",
        "type": "lte",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gteTop",
        "type": "gte",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "allLong",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "allShort",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lowerBand",
        "type": "sub",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "upperBand",
        "type": "add",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "ltCloseLB",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gtCloseUB",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "anyLongExit",
        "type": "agg_any_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "anyShortExit",
        "type": "agg_any_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "anyClose",
        "type": "agg_any_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "exec",
        "type": "trade_signal_executor",
        "options": [
          {
            "id": "closeIfIndecisive",
            "value": false,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      }
    ],
    "edges": [
      {
        "source": {
          "id": "mkt",
          "handle": "c"
        },
        "target": {
          "id": "rsi",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "mkt",
          "handle": "c"
        },
        "target": {
          "id": "upperBand",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "mkt",
          "handle": "c"
        },
        "target": {
          "id": "lowerBand",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "mkt",
          "handle": "c"
        },
        "target": {
          "id": "ltCloseLB",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "mkt",
          "handle": "c"
        },
        "target": {
          "id": "gtCloseUB",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "rsi",
          "handle": "result"
        },
        "target": {
          "id": "lteBottom",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "num30",
          "handle": "result"
        },
        "target": {
          "id": "lteBottom",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "rsi",
          "handle": "result"
        },
        "target": {
          "id": "gteTop",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "num70",
          "handle": "result"
        },
        "target": {
          "id": "gteTop",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "atr",
          "handle": "result"
        },
        "target": {
          "id": "smaATR",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "smaATR",
          "handle": "result"
        },
        "target": {
          "id": "mulATR",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "num15",
          "handle": "result"
        },
        "target": {
          "id": "mulATR",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "atr",
          "handle": "result"
        },
        "target": {
          "id": "gtVol",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "mulATR",
          "handle": "result"
        },
        "target": {
          "id": "gtVol",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "mkt",
          "handle": "v"
        },
        "target": {
          "id": "emaVol",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "emaVol",
          "handle": "result"
        },
        "target": {
          "id": "mulVol",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "num15",
          "handle": "result"
        },
        "target": {
          "id": "mulVol",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "mkt",
          "handle": "v"
        },
        "target": {
          "id": "gtVolSurge",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "mulVol",
          "handle": "result"
        },
        "target": {
          "id": "gtVolSurge",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "lteBottom",
          "handle": "result"
        },
        "target": {
          "id": "allLong",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gtVol",
          "handle": "result"
        },
        "target": {
          "id": "allLong",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gtVolSurge",
          "handle": "result"
        },
        "target": {
          "id": "allLong",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gteTop",
          "handle": "result"
        },
        "target": {
          "id": "allShort",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gtVol",
          "handle": "result"
        },
        "target": {
          "id": "allShort",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gtVolSurge",
          "handle": "result"
        },
        "target": {
          "id": "allShort",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "atr",
          "handle": "result"
        },
        "target": {
          "id": "lowerBand",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "atr",
          "handle": "result"
        },
        "target": {
          "id": "upperBand",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "lowerBand",
          "handle": "result"
        },
        "target": {
          "id": "ltCloseLB",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "upperBand",
          "handle": "result"
        },
        "target": {
          "id": "gtCloseUB",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "gteTop",
          "handle": "result"
        },
        "target": {
          "id": "anyLongExit",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "ltCloseLB",
          "handle": "result"
        },
        "target": {
          "id": "anyLongExit",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "lteBottom",
          "handle": "result"
        },
        "target": {
          "id": "anyShortExit",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gtCloseUB",
          "handle": "result"
        },
        "target": {
          "id": "anyShortExit",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "anyLongExit",
          "handle": "result"
        },
        "target": {
          "id": "anyClose",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "anyShortExit",
          "handle": "result"
        },
        "target": {
          "id": "anyClose",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "allLong",
          "handle": "result"
        },
        "target": {
          "id": "exec",
          "handle": "long"
        }
      },
      {
        "source": {
          "id": "allShort",
          "handle": "result"
        },
        "target": {
          "id": "exec",
          "handle": "short"
        }
      },
      {
        "source": {
          "id": "anyClose",
          "handle": "result"
        },
        "target": {
          "id": "exec",
          "handle": "close"
        }
      }
    ]
  },
  "timestamp": "2025-06-23T15:10:57.156894",
  "tags": [
    "volatility",
    "volume",
    "cycle",
    "reversion",
    "strategy"
  ]
}