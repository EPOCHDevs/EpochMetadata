{
  "id": "volatility_adjusted_trix_keltner_strategy",
  "name": "Volatility-Adjusted TRIX Keltner Strategy",
  "description": "This strategy combines the TRIX indicator with Keltner Channels to identify potential trade opportunities based on volatility adjustments. It aims to enhance trading decisions by filtering signals through a volatility-based channel, optimizing entry and exit points.",
  "algorithm_type": "TechnicalPattern",
  "prompt": "//@version=5\nstrategy(\"Volatility-Adjusted TRIX & Keltner Strategy\", overlay=true, initial_capital=10000, default_qty_type=strategy.percent_of_equity, default_qty_value=10)\n\n// Input parameters\ntrix_length = input.int(15, title=\"TRIX Length\")\ntrix_signal = input.int(9, title=\"TRIX Signal Length\")\nkeltner_length = input.int(20, title=\"Keltner Channel Length\")\nkeltner_mult = input.float(1.5, title=\"Keltner Channel Multiplier\")\n\n// Calculate TRIX\nema1 = ta.ema(close, trix_length)\nema2 = ta.ema(ema1, trix_length)\nema3 = ta.ema(ema2, trix_length)\ntrix = 100 * (ema3 - ema3[1]) / ema3[1]\ntrix_smooth = ta.ema(trix, trix_signal)\n\n// Calculate Keltner Channels\nrange_ma = ta.ema(ta.tr(true), keltner_length)\nmiddle = ta.ema(close, keltner_length)\nupper = middle + keltner_mult * range_ma\nlower = middle - keltner_mult * range_ma\n\n// Volatility-adjusted TRIX threshold (dynamic according to ATR)\natr = ta.atr(keltner_length)\nvol_adj_threshold = 0.2 * atr / close * 100  // % adjusted threshold\n\n// Entry conditions\nlong_cond = (trix > trix_smooth) and (trix > vol_adj_threshold) and (close > upper)\nshort_cond = (trix < trix_smooth) and (trix < -vol_adj_threshold) and (close < lower)\n\n// Exit conditions\nexit_long = ta.crossunder(trix, trix_smooth) or close < middle\nexit_short = ta.crossover(trix, trix_smooth) or close > middle\n\n// Execute trades\nif (long_cond)\n    strategy.entry(\"Long\", strategy.long)\nif (exit_long)\n    strategy.close(\"Long\")\n\nif (short_cond)\n    strategy.entry(\"Short\", strategy.short)\nif (exit_short)\n    strategy.close(\"Short\")\n\n// Plot Keltner Channels\nplot(middle, color=color.orange, title=\"KC Middle\")\nplot(upper, color=color.green, title=\"KC Upper\")\nplot(lower, color=color.red, title=\"KC Lower\")\n\n// Plot TRIX and Signal in separate pane\nplot(trix, color=color.blue, title=\"TRIX\")\nplot(trix_smooth, color=color.maroon, title=\"TRIX Signal\")\nhline(0, \"Zero Line\", color=color.gray)",
  "blueprint": {
    "nodes": [
      {
        "id": "md",
        "type": "market_data_source",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "minute",
          "interval": 1
        }
      },
      {
        "id": "trix",
        "type": "trix",
        "options": [
          {
            "id": "period",
            "value": 15,
            "name": "TRIX Length",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "trix_smooth",
        "type": "ema",
        "options": [
          {
            "id": "period",
            "value": 9,
            "name": "TRIX Signal Len",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "atr20",
        "type": "atr",
        "options": [
          {
            "id": "period",
            "value": 20,
            "name": "ATR Len",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "minute",
          "interval": 1
        }
      },
      {
        "id": "kc20",
        "type": "keltner_channels",
        "options": [
          {
            "id": "roll_period",
            "value": 20,
            "name": "KC Length",
            "isExposed": true
          },
          {
            "id": "band_multiplier",
            "value": 1.5,
            "name": "KC Mult",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "minute",
          "interval": 1
        }
      },
      {
        "id": "ema_middle",
        "type": "ema",
        "options": [
          {
            "id": "period",
            "value": 20,
            "name": "KC Mid Len",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "const20",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 20,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "div_ratio",
        "type": "div",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "mul_thr",
        "type": "mul",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "neg1",
        "type": "negative_one",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "mul_neg_thr",
        "type": "mul",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_trix_signal",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_trix_thr",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_close_upper",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "long_cond",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lt_trix_signal",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lt_trix_neg",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lt_close_lower",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "short_cond",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lt_close_middle",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "exit_long_any",
        "type": "agg_any_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_close_middle",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "exit_short_any",
        "type": "agg_any_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "exit_close_any",
        "type": "agg_any_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "executor",
        "type": "trade_signal_executor",
        "options": [
          {
            "id": "closeIfIndecisive",
            "value": false,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      }
    ],
    "edges": [
      {
        "source": {
          "id": "md",
          "handle": "c"
        },
        "target": {
          "id": "trix",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "trix",
          "handle": "result"
        },
        "target": {
          "id": "trix_smooth",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "md",
          "handle": "c"
        },
        "target": {
          "id": "div_ratio",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "atr20",
          "handle": "result"
        },
        "target": {
          "id": "div_ratio",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "div_ratio",
          "handle": "result"
        },
        "target": {
          "id": "mul_thr",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "const20",
          "handle": "result"
        },
        "target": {
          "id": "mul_thr",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "mul_thr",
          "handle": "result"
        },
        "target": {
          "id": "gt_trix_thr",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "trix",
          "handle": "result"
        },
        "target": {
          "id": "gt_trix_thr",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "mul_thr",
          "handle": "result"
        },
        "target": {
          "id": "mul_neg_thr",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "neg1",
          "handle": "result"
        },
        "target": {
          "id": "mul_neg_thr",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "trix",
          "handle": "result"
        },
        "target": {
          "id": "gt_trix_signal",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "trix_smooth",
          "handle": "result"
        },
        "target": {
          "id": "gt_trix_signal",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "trix",
          "handle": "result"
        },
        "target": {
          "id": "lt_trix_signal",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "trix_smooth",
          "handle": "result"
        },
        "target": {
          "id": "lt_trix_signal",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "trix",
          "handle": "result"
        },
        "target": {
          "id": "lt_trix_neg",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "mul_neg_thr",
          "handle": "result"
        },
        "target": {
          "id": "lt_trix_neg",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "md",
          "handle": "c"
        },
        "target": {
          "id": "gt_close_upper",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "kc20",
          "handle": "upper_band"
        },
        "target": {
          "id": "gt_close_upper",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "md",
          "handle": "c"
        },
        "target": {
          "id": "lt_close_lower",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "kc20",
          "handle": "lower_band"
        },
        "target": {
          "id": "lt_close_lower",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "gt_trix_signal",
          "handle": "result"
        },
        "target": {
          "id": "long_cond",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_trix_thr",
          "handle": "result"
        },
        "target": {
          "id": "long_cond",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_close_upper",
          "handle": "result"
        },
        "target": {
          "id": "long_cond",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "lt_trix_signal",
          "handle": "result"
        },
        "target": {
          "id": "short_cond",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "lt_trix_neg",
          "handle": "result"
        },
        "target": {
          "id": "short_cond",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "lt_close_lower",
          "handle": "result"
        },
        "target": {
          "id": "short_cond",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "md",
          "handle": "c"
        },
        "target": {
          "id": "ema_middle",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "md",
          "handle": "c"
        },
        "target": {
          "id": "lt_close_middle",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "ema_middle",
          "handle": "result"
        },
        "target": {
          "id": "lt_close_middle",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "lt_trix_signal",
          "handle": "result"
        },
        "target": {
          "id": "exit_long_any",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "lt_close_middle",
          "handle": "result"
        },
        "target": {
          "id": "exit_long_any",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "md",
          "handle": "c"
        },
        "target": {
          "id": "gt_close_middle",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "ema_middle",
          "handle": "result"
        },
        "target": {
          "id": "gt_close_middle",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "gt_trix_signal",
          "handle": "result"
        },
        "target": {
          "id": "exit_short_any",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_close_middle",
          "handle": "result"
        },
        "target": {
          "id": "exit_short_any",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "exit_long_any",
          "handle": "result"
        },
        "target": {
          "id": "exit_close_any",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "exit_short_any",
          "handle": "result"
        },
        "target": {
          "id": "exit_close_any",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "long_cond",
          "handle": "result"
        },
        "target": {
          "id": "executor",
          "handle": "long"
        }
      },
      {
        "source": {
          "id": "short_cond",
          "handle": "result"
        },
        "target": {
          "id": "executor",
          "handle": "short"
        }
      },
      {
        "source": {
          "id": "exit_close_any",
          "handle": "result"
        },
        "target": {
          "id": "executor",
          "handle": "close"
        }
      }
    ]
  },
  "timestamp": "2025-06-23T14:49:23.293604",
  "tags": [
    "TRIX",
    "Keltner Channels",
    "Volatility",
    "Technical Analysis",
    "Trading Strategy"
  ]
}