{
  "id": "mean_reverting_hurst_impulse_reversal",
  "name": "Hurst Impulse Reversal Strategy",
  "description": "This strategy utilizes the Hurst exponent to identify mean-reverting trends in price movements. By combining fast and slow EMAs with an impulse score, it aims to capture reversals effectively.",
  "algorithm_type": "MeanReverting",
  "prompt": "// @version=5\nstrategy(\"Hurst-Impulse Trend Reversal Strategy\", overlay=true, max_lines_count=50)\n\n// === INPUTS ===\nhurst_length     = input.int(100, minval=20, title=\"Hurst Exponent Length\")\nema_fast_length  = input.int(7, title=\"Fast EMA Length\")\nema_slow_length  = input.int(21, title=\"Slow EMA Length\")\nimpulse_threshold= input.float(0.7, minval=0.1, maxval=2, step=0.01, title=\"Impulse Score Threshold\")\natr_length       = input.int(14, title=\"ATR Length\")\natr_mult         = input.float(2.0, title=\"ATR Stop Multiplier\")\n\n// === HURST EXPONENT CALCULATION ===\nhurst(src, len) =>\n    mean = ta.sma(src, len)\n    dev = math.sum(math.abs(src - mean), len) / len\n    maxv = ta.highest(src, len)\n    minv = ta.lowest(src, len)\n    r = maxv - minv\n    if dev > 0 and r > 0\n        math.log(r / dev) / math.log(len)\n    else\n        na\nhurst_exp = hurst(close, hurst_length)\n\n// === PRICE IMPULSE CALCULATION ===\nimpulse_raw = (ta.ema(close, ema_fast_length) - ta.ema(close, ema_slow_length)) / ta.ema(close, ema_slow_length)\nimpulse = ta.ema(impulse_raw, 3)\n\n// === HURST DIRECTION FILTER ===\n// Hurst above 0.55: trending, below 0.45: mean-reverting, else neutral\ntrending = hurst_exp > 0.55\nmean_reverting = hurst_exp < 0.45\n\n// === ENTRY SIGNALS ===\nlong_entry = (impulse > impulse_threshold) and trending and ta.crossover(impulse, impulse_threshold)\nshort_entry = (impulse < -impulse_threshold) and trending and ta.crossunder(impulse, -impulse_threshold)\n\n// === EXIT ON CONTRA-IMPULSE OR HURST REGIME CHANGE ===\nlong_exit = (impulse < 0) or mean_reverting\nshort_exit = (impulse > 0) or mean_reverting\n\n// === ATR-BASED STOPS ===\natr = ta.atr(atr_length)\nlong_stop = close - atr * atr_mult\nshort_stop = close + atr * atr_mult\n\n// === STRATEGY EXECUTION ===\nif long_entry and not strategy.opentrades\n    strategy.entry(\"Long\", strategy.long, stop=long_stop)\nif strategy.position_size > 0 and long_exit\n    strategy.close(\"Long\")\n    \nif short_entry and not strategy.opentrades\n    strategy.entry(\"Short\", strategy.short, stop=short_stop)\nif strategy.position_size < 0 and short_exit\n    strategy.close(\"Short\")\n\n// === PLOTTING ===\nplot(hurst_exp, color=color.purple, linewidth=2, title=\"Hurst Exponent\")\nh_level1 = hline(0.55, \"Trending Cutoff\", color=color.green)\nh_level2 = hline(0.45, \"Mean-reverting Cutoff\", color=color.red)\nplot(impulse, color=color.orange, linewidth=2, title=\"Impulse Score\")\nhline(impulse_threshold, \"Impulse Threshold\", color=color.teal, linestyle=hline.style_dashed)\nhline(-impulse_threshold, \"Impulse -Threshold\", color=color.teal, linestyle=hline.style_dashed)\nplot(long_stop, color=color.new(color.green, 75), style=plot.style_stepline, title=\"Long Stop\")\nplot(short_stop, color=color.new(color.red, 75), style=plot.style_stepline, title=\"Short Stop\")\nbgcolor(trending ? color.new(color.green, 85) : mean_reverting ? color.new(color.red, 85) : na)",
  "blueprint": {
    "nodes": [
      {
        "id": "src",
        "type": "market_data_source",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "minute",
          "interval": 1
        }
      },
      {
        "id": "ema_fast",
        "type": "ema",
        "options": [
          {
            "id": "period",
            "value": 7,
            "name": "Fast EMA Length",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "ema_slow",
        "type": "ema",
        "options": [
          {
            "id": "period",
            "value": 21,
            "name": "Slow EMA Length",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "diff",
        "type": "sub",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "ratio",
        "type": "div",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "ema_impulse",
        "type": "ema",
        "options": [
          {
            "id": "period",
            "value": 3,
            "name": "Impulse Smoothing",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "hurst",
        "type": "rolling_hurst_exponent",
        "options": [
          {
            "id": "window",
            "value": 100,
            "name": "Hurst Length",
            "isExposed": true
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "thr_high",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 0.55,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "trending",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "zero",
        "type": "zero",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "masked_imp",
        "type": "boolean_select",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "adapter",
        "type": "trade_executor_adapter",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "thr_low",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 0.45,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "mean_rev",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "executor",
        "type": "trade_signal_executor",
        "options": [
          {
            "id": "closeIfIndecisive",
            "value": false,
            "name": "Exit If Indecisive",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      }
    ],
    "edges": [
      {
        "source": {
          "id": "src",
          "handle": "c"
        },
        "target": {
          "id": "ema_fast",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "src",
          "handle": "c"
        },
        "target": {
          "id": "ema_slow",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "ema_fast",
          "handle": "result"
        },
        "target": {
          "id": "diff",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "ema_slow",
          "handle": "result"
        },
        "target": {
          "id": "diff",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "diff",
          "handle": "result"
        },
        "target": {
          "id": "ratio",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "ema_slow",
          "handle": "result"
        },
        "target": {
          "id": "ratio",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "ratio",
          "handle": "result"
        },
        "target": {
          "id": "ema_impulse",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "ema_impulse",
          "handle": "result"
        },
        "target": {
          "id": "masked_imp",
          "handle": "true"
        }
      },
      {
        "source": {
          "id": "zero",
          "handle": "result"
        },
        "target": {
          "id": "masked_imp",
          "handle": "false"
        }
      },
      {
        "source": {
          "id": "hurst",
          "handle": "result"
        },
        "target": {
          "id": "trending",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "thr_high",
          "handle": "result"
        },
        "target": {
          "id": "trending",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "trending",
          "handle": "result"
        },
        "target": {
          "id": "masked_imp",
          "handle": "condition"
        }
      },
      {
        "source": {
          "id": "masked_imp",
          "handle": "result"
        },
        "target": {
          "id": "adapter",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "adapter",
          "handle": "long"
        },
        "target": {
          "id": "executor",
          "handle": "long"
        }
      },
      {
        "source": {
          "id": "adapter",
          "handle": "short"
        },
        "target": {
          "id": "executor",
          "handle": "short"
        }
      },
      {
        "source": {
          "id": "src",
          "handle": "c"
        },
        "target": {
          "id": "hurst",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "hurst",
          "handle": "result"
        },
        "target": {
          "id": "mean_rev",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "thr_low",
          "handle": "result"
        },
        "target": {
          "id": "mean_rev",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "mean_rev",
          "handle": "result"
        },
        "target": {
          "id": "executor",
          "handle": "close"
        }
      }
    ]
  },
  "timestamp": "2025-06-23T15:04:59.168542",
  "tags": [
    "mean reverting",
    "Hurst exponent",
    "EMA",
    "trend reversal",
    "impulse score"
  ]
}