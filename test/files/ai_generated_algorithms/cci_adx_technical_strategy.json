{
  "id": "algorithm-22",
  "name": "CCI and ADX Technical Strategy",
  "description": "This algorithm calculates the Commodity Channel Index (CCI) and Average Directional Index (ADX) to identify potential trading signals based on market trends. By assessing price movements and volatility, it aims to provide insights for traders looking to capitalize on market momentum.",
  "algorithm_type": "TechnicalPattern",
  "prompt": "import pandas as pd\nimport numpy as np\n\ndef calculate_cci(df, n=20):\n    tp = (df['high'] + df['low'] + df['close']) / 3\n    cci = (tp - tp.rolling(n).mean()) / (0.015 * tp.rolling(n).std())\n    return cci\n\ndef calculate_adx(df, n=14):\n    plus_dm = df['high'].diff()\n    minus_dm = df['low'].diff().abs()\n    plus_dm[plus_dm < minus_dm] = 0\n    minus_dm[minus_dm <= plus_dm] = 0\n\n    tr1 = pd.DataFrame(df['high'] - df['low'])\n    tr2 = pd.DataFrame((df['high'] - df['close'].shift()).abs())\n    tr3 = pd.DataFrame((df['low'] - df['close'].shift()).abs())\n    tr = pd.concat([tr1, tr2, tr3], axis=1).max(axis=1)\n    tr = tr.rolling(n).sum()\n\n    plus_di = 100 * (plus_dm.rolling(n).sum() / tr)\n    minus_di = 100 * (minus_dm.rolling(n).sum() / tr)\n    dx = (abs(plus_di - minus_di) / (plus_di + minus_di)) * 100\n    adx = dx.rolling(n).mean()\n    return adx\n\ndef calculate_supertrend(df, period=10, multiplier=3):\n    hl2 = (df['high'] + df['low']) / 2\n    atr = df['high'].combine(df['low'], max) - df['high'].combine(df['low'], min)\n    atr = atr.rolling(period).mean()\n\n    upperband = hl2 + (multiplier * atr)\n    lowerband = hl2 - (multiplier * atr)\n    supertrend = pd.Series(index=df.index, dtype='float64')\n\n    direction = pd.Series(index=df.index, dtype='int8')\n    supertrend.iloc[0] = upperband.iloc[0]\n    direction.iloc[0] = 1\n\n    for i in range(1, len(df)):\n        if df['close'].iloc[i-1] <= supertrend.iloc[i-1]:\n            supertrend.iloc[i] = min(upperband.iloc[i], supertrend.iloc[i-1])\n            direction.iloc[i] = -1\n        else:\n            supertrend.iloc[i] = max(lowerband.iloc[i], supertrend.iloc[i-1])\n            direction.iloc[i] = 1\n    return supertrend, direction\n\ndef trading_strategy(data):\n    data = data.copy()\n    data['cci'] = calculate_cci(data, n=20)\n    data['adx'] = calculate_adx(data, n=14)\n    data['ema_13'] = data['close'].ewm(span=13, adjust=False).mean()\n    data['ema_50'] = data['close'].ewm(span=50, adjust=False).mean()\n    data['volume_sma_20'] = data['volume'].rolling(20).mean()\n    data['supertrend'], data['supertrend_dir'] = calculate_supertrend(data, period=7, multiplier=2)\n\n    data['signal'] = 0\n\n    long_condition = (\n        (data['cci'] > 100) &\n        (data['adx'] > 20) &\n        (data['close'] > data['supertrend']) &\n        (data['ema_13'] > data['ema_50']) &\n        (data['volume'] > data['volume_sma_20'])\n    )\n    short_condition = (\n        (data['cci'] < -100) &\n        (data['adx'] > 20) &\n        (data['close'] < data['supertrend']) &\n        (data['ema_13'] < data['ema_50']) &\n        (data['volume'] > data['volume_sma_20'])\n    )\n    data.loc[long_condition, 'signal'] = 1\n    data.loc[short_condition, 'signal'] = -1\n    return data",
  "blueprint": {
    "nodes": [
      {
        "id": "mkt",
        "type": "market_data_source",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "minute",
          "interval": 1
        }
      },
      {
        "id": "cci20",
        "type": "cci",
        "options": [
          {
            "id": "period",
            "value": 20,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "minute",
          "interval": 1
        }
      },
      {
        "id": "adx14",
        "type": "adx",
        "options": [
          {
            "id": "period",
            "value": 14,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "minute",
          "interval": 1
        }
      },
      {
        "id": "ema13",
        "type": "ema",
        "options": [
          {
            "id": "period",
            "value": 13,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "ema50",
        "type": "ema",
        "options": [
          {
            "id": "period",
            "value": 50,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "smaVol20",
        "type": "sma",
        "options": [
          {
            "id": "period",
            "value": 20,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "psarNode",
        "type": "psar",
        "options": [
          {
            "id": "acceleration_factor_step",
            "value": 0.02,
            "name": "",
            "isExposed": false
          },
          {
            "id": "acceleration_factor_maximum",
            "value": 0.2,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": {
          "type": "minute",
          "interval": 1
        }
      },
      {
        "id": "num100",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 100,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "numNeg100",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": -100,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "num20",
        "type": "number",
        "options": [
          {
            "id": "value",
            "value": 20,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_cci_100",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "lt_cci_-100",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_adx_20",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "close_gt_psar",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "close_lt_psar",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "ema_gt",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "ema_lt",
        "type": "lt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "gt_vol_vsma",
        "type": "gt",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "longAgg",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "shortAgg",
        "type": "agg_all_of",
        "options": [],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      },
      {
        "id": "executor",
        "type": "trade_signal_executor",
        "options": [
          {
            "id": "closeIfIndecisive",
            "value": false,
            "name": "",
            "isExposed": false
          }
        ],
        "metadata": {
          "parentId": null
        },
        "timeframe": null
      }
    ],
    "edges": [
      {
        "source": {
          "id": "mkt",
          "handle": "c"
        },
        "target": {
          "id": "ema13",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "mkt",
          "handle": "c"
        },
        "target": {
          "id": "ema50",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "mkt",
          "handle": "v"
        },
        "target": {
          "id": "smaVol20",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "ema13",
          "handle": "result"
        },
        "target": {
          "id": "ema_gt",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "ema50",
          "handle": "result"
        },
        "target": {
          "id": "ema_gt",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "ema13",
          "handle": "result"
        },
        "target": {
          "id": "ema_lt",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "ema50",
          "handle": "result"
        },
        "target": {
          "id": "ema_lt",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "cci20",
          "handle": "result"
        },
        "target": {
          "id": "gt_cci_100",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "num100",
          "handle": "result"
        },
        "target": {
          "id": "gt_cci_100",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "cci20",
          "handle": "result"
        },
        "target": {
          "id": "lt_cci_-100",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "numNeg100",
          "handle": "result"
        },
        "target": {
          "id": "lt_cci_-100",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "adx14",
          "handle": "result"
        },
        "target": {
          "id": "gt_adx_20",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "num20",
          "handle": "result"
        },
        "target": {
          "id": "gt_adx_20",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "mkt",
          "handle": "v"
        },
        "target": {
          "id": "gt_vol_vsma",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "smaVol20",
          "handle": "result"
        },
        "target": {
          "id": "gt_vol_vsma",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "mkt",
          "handle": "c"
        },
        "target": {
          "id": "close_gt_psar",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "psarNode",
          "handle": "result"
        },
        "target": {
          "id": "close_gt_psar",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "mkt",
          "handle": "c"
        },
        "target": {
          "id": "close_lt_psar",
          "handle": "*0"
        }
      },
      {
        "source": {
          "id": "psarNode",
          "handle": "result"
        },
        "target": {
          "id": "close_lt_psar",
          "handle": "*1"
        }
      },
      {
        "source": {
          "id": "gt_cci_100",
          "handle": "result"
        },
        "target": {
          "id": "longAgg",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_adx_20",
          "handle": "result"
        },
        "target": {
          "id": "longAgg",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "close_gt_psar",
          "handle": "result"
        },
        "target": {
          "id": "longAgg",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "ema_gt",
          "handle": "result"
        },
        "target": {
          "id": "longAgg",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_vol_vsma",
          "handle": "result"
        },
        "target": {
          "id": "longAgg",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "lt_cci_-100",
          "handle": "result"
        },
        "target": {
          "id": "shortAgg",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_adx_20",
          "handle": "result"
        },
        "target": {
          "id": "shortAgg",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "close_lt_psar",
          "handle": "result"
        },
        "target": {
          "id": "shortAgg",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "ema_lt",
          "handle": "result"
        },
        "target": {
          "id": "shortAgg",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "gt_vol_vsma",
          "handle": "result"
        },
        "target": {
          "id": "shortAgg",
          "handle": "*"
        }
      },
      {
        "source": {
          "id": "longAgg",
          "handle": "result"
        },
        "target": {
          "id": "executor",
          "handle": "long"
        }
      },
      {
        "source": {
          "id": "shortAgg",
          "handle": "result"
        },
        "target": {
          "id": "executor",
          "handle": "short"
        }
      }
    ]
  },
  "timestamp": "2025-06-23T14:54:39.228549",
  "tags": [
    "technical",
    "cci",
    "adx",
    "trading",
    "momentum"
  ]
}