# Test that triple-quoted JSON strings parse correctly with card_schema
src = market_data_source()
short_ma = ema(period=15)(src.c)
long_ma = ema(period=100)(src.c)
bullish = short_ma.result > long_ma.result
bearish = long_ma.result > short_ma.result
new_signal = bullish or bearish
color = "BULLISH" if bullish else ("BEARISH" if bearish else None)

card_selector_filter(card_schema="""
{
  "title": "MA Crossover",
  "icon": "Signal",
  "select_key": "new_signal#result",
  "schemas": [
      {"column_id": "color#result", "slot": "Hero", "render_type": "Badge", "color_map": {"Success": ["BULLISH"], "Error": ["BEARISH"]}},
      {"column_id": "long_ma#result", "slot": "Subtitle", "render_type": "Decimal"},
      {"column_id": "short_ma#result", "slot": "Subtitle", "render_type": "Decimal"}
  ]
}
""")(new_signal, color, long_ma, short_ma)
