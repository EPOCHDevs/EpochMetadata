# Source: strategies/patterns/technical.mdx:217
# Section: Technical Trading > Multi-Timeframe Trend Following
# Type: complete_strategy

src = market_data_source()

# Daily trend (1D timeframe)
daily_ema = ema(period=50, timeframe="1D")(src.c)
daily_uptrend = src.c > daily_ema
daily_downtrend = src.c < daily_ema

# Hourly confirmation (1H timeframe)
hourly_ema_fast = ema(period=20, timeframe="1H")(src.c)
hourly_ema_slow = ema(period=50, timeframe="1H")(src.c)
hourly_bullish = hourly_ema_fast > hourly_ema_slow
hourly_bearish = hourly_ema_fast < hourly_ema_slow

# Intraday entry (15Min base timeframe)
intraday_fast = ema(period=12)(src.c)
intraday_slow = ema(period=26)(src.c)
intraday_cross_up = crossover(intraday_fast, intraday_slow)
intraday_cross_down = crossover(intraday_slow, intraday_fast)

# Aligned entry (all timeframes agree)
buy = daily_uptrend and hourly_bullish and intraday_cross_up
sell = daily_downtrend and hourly_bearish and intraday_cross_down

# Exit when daily trend changes
exit_long = daily_downtrend
exit_short = daily_uptrend

trade_signal_executor()(
    enter_long=buy,
    enter_short=sell,
    exit_long=exit_long,
    exit_short=exit_short
)
