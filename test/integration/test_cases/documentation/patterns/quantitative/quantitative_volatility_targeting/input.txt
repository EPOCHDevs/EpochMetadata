# Source: strategies/patterns/quantitative.mdx:153
# Section: Quantitative Strategies > Volatility Targeting
# Type: complete_strategy

src = market_data_source()

# Target annualized volatility (e.g., 15%)
target_vol = 15.0

# Realized volatility
realized_vol = volatility(period=20)(src.c)

# Position sizing multiplier (scale inversely)
vol_scalar = target_vol / realized_vol
# Clamp to reasonable range: Max 2x, Min 0.5x, else actual
vol_scalar_clamped = conditional_select(
    vol_scalar > 2.0, 2.0,
    vol_scalar < 0.5, 0.5,
    vol_scalar
)

# Base signal (trend-following)
fast = ema(period=20)(src.c)
slow = ema(period=50)(src.c)
trend_up = fast > slow

# Execution (position sizing handled externally)
# This signals direction; size adjusted by vol_scalar
trade_signal_executor()(enter_long=trend_up)
