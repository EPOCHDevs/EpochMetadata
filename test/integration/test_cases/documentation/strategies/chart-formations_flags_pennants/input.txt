# Source: strategies/chart-formations.md:87
# Section: Chart Formation Recognition > Flags & Pennants
# Type: complete_strategy

src = market_data_source()

flags = flag()(src.h, src.l, src.c)
pnt = pennant()(src.h, src.l, src.c)

bull_flag_break = flags.bull_flag
bear_flag_break = flags.bear_flag

# Vol decreases during formation, surges on breakout
vol_breakout = src.v > sma(period=20)(src.v) * 1.5

entry = bull_flag_break and vol_breakout
exit = bear_flag_break

trade_signal_executor()(enter_long=entry, exit_long=exit)
