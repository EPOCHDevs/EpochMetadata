# Source: strategies/advanced-volatility.mdx:33
# Section: Advanced Volatility Estimators > Garman-Klass (7.4x)
# Type: complete_strategy

src = market_data_source()

vol_gk = garman_klass(period=20, trading_days=252)(src.l, src.h, src.o, src.c)

# Vol regime detection using percentile_select
low_vol = percentile_select(lookback=252, percentile=20)(vol_gk.result, 0, 1)  # 1 if below 20th percentile
high_vol = percentile_select(lookback=252, percentile=80)(vol_gk.result, 1, 0)  # 1 if above 80th percentile

# Vol breakout
vol_ma = sma(period=50)(vol_gk.result)
vol_expansion = vol_gk.result > vol_ma * 1.5

trade_signal_executor()(enter_long=low_vol, enter_short=high_vol)
