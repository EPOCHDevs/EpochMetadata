# Source: strategies/advanced-momentum.md:47
# Section: Advanced Momentum Indicators > Ultimate Oscillator
# Type: complete_strategy

src = market_data_source()

uo = ultosc(short_period=7, medium_period=14, long_period=28)(src.h, src.l, src.c)

# Divergence at extremes
price_lower_low = src.l < min(period=20)(src.l[1])
uo_higher_low = uo.result > uo.result[20]

bullish_div = price_lower_low and uo_higher_low and (uo.result < 30)

price_higher_high = src.h > max(period=20)(src.h[1])
uo_lower_high = uo.result < uo.result[20]

bearish_div = price_higher_high and uo_lower_high and (uo.result > 70)

trade_signal_executor()(enter_long=bullish_div, enter_short=bearish_div)
