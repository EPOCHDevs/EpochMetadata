# Source: strategies/fundamental-reference.md:112
# Section: Fundamental Data Integration > Macro Overlay (Economic Indicators)
# Type: partial_example

src = market_data_source()
fed_funds = economic_indicator(category="FedFunds")
vix = indices(ticker="VIX")()

# Risk-on environment
low_rates = fed_funds.value < 2.0
falling_rates = fed_funds.value < fed_funds.value[30]

low_fear = vix.c < 15
rising_fear = vix.c > vix.c[5]

risk_on = low_rates and low_fear
risk_off = rising_fear or (vix.c > 30)

# Only trade in risk-on
technical_signal = crossover(ema(period=20)(src.c), ema(period=50)(src.c))
macro_ok = risk_on

entry = technical_signal and macro_ok
exit = risk_off
