# Source: strategies/chart-formations.md:110
# Section: Chart Formation Recognition > Complete Pattern Strategy
# Type: complete_strategy

src = market_data_source()

# Detect all patterns
db = double_top_bottom(pattern_type="Double Bottom Only", similarity_tolerance=0.02)(src.h, src.l, src.c)
ihs = inverse_head_and_shoulders()(src.h, src.l, src.c)
asc_tri = triangles(triangle_type="Ascending (Bullish)")(src.h, src.l, src.c)
bf = flag()(src.h, src.l, src.c)
# fw = falling_wedge()(src.h, src.l, src.c)  # falling_wedge doesn't exist

# Bullish breakouts
db_break = db.pattern_detected and (src.c > db.breakout_level)
ihs_break = ihs.pattern_detected and (src.c > ihs.neckline_level)
asc_break = asc_tri.pattern_detected
flag_break = bf.bull_flag

bullish_pattern = db_break or ihs_break or asc_break or flag_break

# Volume + trend confirmation
uptrend = ema(period=50)(src.c) > ema(period=200)(src.c)
vol_surge = src.v > sma(period=20)(src.v) * 1.3

entry = bullish_pattern and uptrend and vol_surge

trade_signal_executor()(enter_long=entry)
