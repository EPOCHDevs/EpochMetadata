# Source: strategies/regime-detection.mdx:50
# Section: Regime Detection > ADX / DMI
# Type: complete_strategy

src = market_data_source()

adx_val = adx(period=14)(src.h, src.l, src.c)
di_result = di(period=14)(src.h, src.l, src.c)

# Trend strength (direction-agnostic)
strong_trend = adx_val > 25
ranging = adx_val < 20

# Direction
bullish = di_result.plus_di > di_result.minus_di

# Regime classification
strong_uptrend = strong_trend and bullish
strong_downtrend = strong_trend and not bullish

# Route strategy
trend_signal = ema(period=20)(src.c) > ema(period=50)(src.c)
mr_signal = rsi(period=14)(src.c) < 30

# Trend-follow in trending markets, mean-revert in ranges
entry = conditional_select(
    strong_trend, trend_signal,
    ranging, mr_signal,
    0
)

exit = not strong_trend

trade_signal_executor()(enter_long=entry, exit_long=exit)
