# Parquet Explorer

Interactive web-based tool for exploring and analyzing parquet files generated by the data_explorer tool.

## Features

- üîç **Interactive DataFrame Viewer** - Sort, filter, and search your data
- üìä **Built-in Plotting** - Line charts, scatter plots, heatmaps, histograms, and more
- üìà **Statistics** - Column statistics, correlations, and distributions
- üîé **Query Builder** - SQL-like filtering and data exploration
- üíæ **Export** - Export filtered data to CSV or Excel
- üåê **Web Interface** - Clean, responsive UI accessible via browser

## Setup

### 1. Create Virtual Environment

```bash
cd tools/parquet_explorer
python3 -m venv .venv
source .venv/bin/activate  # On Windows: .venv\Scripts\activate
```

### 2. Install Dependencies

```bash
pip install -r requirements.txt
```

## Usage

### Explore a Directory

```bash
python parquet_explorer.py /tmp/explorer_test/daily/
```

This will:
1. Find all parquet files in the directory
2. List them with file sizes
3. Let you select which file to explore

### Explore a Specific File

```bash
python parquet_explorer.py /tmp/explorer_test/daily/tables/1D/AAPL-Stocks.parquet.gzip
```

### Custom Port

```bash
python parquet_explorer.py /path/to/data --port 8080
```

## D-Tale Features

Once launched, the web interface provides:

### Viewing & Navigation
- Column sorting (ascending/descending)
- Global search across all columns
- Column-specific filtering
- Freeze columns for easier viewing
- Show/hide columns

### Visualization
- **Charts**: Line, Bar, Scatter, Pie, Heatmap, 3D Scatter
- **Time Series**: Specialized time-series plotting
- **Correlations**: Correlation matrices and heatmaps
- **Distribution**: Histograms and box plots

### Analysis
- **Describe**: Statistical summaries (mean, median, std, min, max, quartiles)
- **Correlations**: Pearson, Spearman, or Kendall correlations
- **Code Export**: Export analysis code as Python/R

### Data Operations
- **Filter**: Build complex filter expressions
- **Query**: SQL-like WHERE clause filtering
- **Column Operations**: Create new columns with expressions
- **Type Conversion**: Convert column data types
- **Missing Data**: Highlight and handle NaN/null values

## Example Workflow

1. **Load the data**:
   ```bash
   python parquet_explorer.py /tmp/explorer_test/daily/
   ```

2. **Browser opens automatically** at `http://localhost:8050`

3. **Explore your data**:
   - Click on column headers to sort
   - Use the "Describe" menu for statistics
   - Click "Charts" to create visualizations
   - Use "Filter" to subset your data
   - Click "Correlations" to find relationships

4. **Create plots**:
   - Charts ‚Üí Line ‚Üí X: date/timestamp, Y: close price
   - Charts ‚Üí Scatter ‚Üí X: volume, Y: close, Color: high
   - Charts ‚Üí Heatmap ‚Üí Select numeric columns

5. **Export**:
   - Export filtered data to CSV
   - Export chart images
   - Export code to reproduce analysis

## Tips

- **Large files**: D-Tale handles millions of rows efficiently
- **Time series**: Set timestamp column as index for better time-series plots
- **Memory**: If file is too large, use pandas chunking before loading
- **Multiple files**: Run multiple instances on different ports

## Keyboard Shortcuts

- `Ctrl+F`: Focus on search box
- `Ctrl+C` in terminal: Exit the application

## Troubleshooting

### Port already in use
```bash
python parquet_explorer.py /path/to/data --port 8051
```

### Missing dependencies
```bash
pip install --upgrade -r requirements.txt
```

### Browser doesn't open
Manually navigate to `http://localhost:8050`

## Alternative: Jupyter Notebook

For notebook-based exploration:

```python
import pandas as pd
import dtale

df = pd.read_parquet('your_file.parquet.gzip')
dtale.show(df)
```
