---
title: Cross-Sectional Analysis
description: Multi-asset ranking, selection, and comparison for factor strategies
icon: Grid3x3
---

import { Callout } from 'fumadocs-ui/components/callout';

# Cross-Sectional Analysis

Evaluate multiple assets simultaneously at each timestamp to generate rankings, factors, statistical comparisons, and universe filters.

---

## Overview

Cross-sectional transforms operate **across assets at each point in time**, not over time for a single asset. At every timestamp, they compare all assets in your universe to produce rankings, selections, or normalized metrics.

**Key Distinction:**
- **Regular transforms**: Operate on one asset over time (e.g., `sma(period=20)` calculates 20-period average for each asset independently)
- **Cross-sectional transforms**: Operate across all assets at each timestamp (e.g., `cs_zscore()` normalizes each asset relative to the mean/std of all assets at that moment)

## When to Use Cross-Sectional vs Time-Series Analysis

**Most trading strategies should use time-series analysis** (regular transforms) unless you're specifically building relative value or factor-based strategies. Understanding this distinction is critical to avoid overusing cross-sectional approaches.

**Use Time-Series Analysis (Regular Transforms) when:**
- Trading a **single asset** or small set of assets independently
- Building technical indicator strategies (moving averages, RSI, MACD, etc.)
- Analyzing price patterns within one asset's historical data
- Creating entry/exit rules based on an asset's own behavior
- Developing breakout, trend-following, or mean-reversion strategies for individual assets

**Use Cross-Sectional Analysis when:**
- Comparing **multiple assets simultaneously** to rank and select
- Building factor strategies (momentum, value, quality factors across stocks)
- Creating long-short portfolios based on relative performance
- Rotating between assets based on comparative metrics
- Normalizing signals across a large universe of assets

**Common Mistake:** Applying cross-sectional transforms when you only need time-series analysis. For example, if you're trading SPY based on its own technical indicators, you don't need cross-sectional analysis. Cross-sectional analysis requires multiple assets and makes decisions based on relative comparisons, not absolute values.

**Example Scenarios:**
- ❌ **Don't use cross-sectional**: "Buy SPY when its 20-day SMA crosses above 50-day SMA" → Use time-series `sma()` only
- ✅ **Use cross-sectional**: "Each week, buy the top 10 S&P 500 stocks by momentum, sell the bottom 10" → Use `cs_rank()` and `top_k()`
- ❌ **Don't use cross-sectional**: "Trade breakouts on EURUSD during London session" → Use time-series transforms with session filters
- ✅ **Use cross-sectional**: "Compare momentum across all forex pairs, trade the 3 strongest" → Use cross-sectional momentum ranking

---

## Categories

### 1. Ranking & Selection

Identify top/bottom performers for portfolio construction using cross-sectional comparisons.

**Momentum Tracking:** `cs_momentum` calculates cumulative cross-sectional returns by averaging returns across all assets at each timestamp. Use this to track aggregate universe performance and identify systematic return patterns.

**Asset Selection:** Use ranking transforms to select subsets from your universe:
- `top_k`, `bottom_k` - Select fixed count of best/worst performers
- `top_k_percent`, `bottom_k_percent` - Select percentage of universe (adapts to size changes)

**Common Patterns:**
- Long-only: Select top performers based on momentum or factor scores
- Long-short: Combine top and bottom selections for balanced exposure
- Rotation: Regularly rebalance based on updated rankings

---

### 2. Statistical Analysis

Normalize and compare metrics across assets for factor investing and risk analysis.

**Cross-Sectional Normalization:** `cs_zscore` normalizes values across assets at each timestamp using `(value - mean_all) / std_all`.

**Key Difference:** Unlike time-series zscore which normalizes one asset over time, cross-sectional zscore normalizes **across multiple assets at one moment**.

**Applications:**
- Combine factors with different units (returns, P/E ratios, volatility)
- Identify statistical outliers relative to peers
- Create mean-reversion signals based on deviation from peer average
- Build multi-factor models with normalized components

## See Also

- [Timeframes](./timeframes) - Multi-timeframe cross-sectional strategies
- [Data Sources](./data-sources) - Access fundamental and market data for factor strategies
