---
title: Core Visualization Features
page_type: implementation
layout: default
order: 2
category: Concepts
description: Auto-plotting and event markers for real-time strategy visualization
parent: ./index.md
---

import { Callout } from 'fumadocs-ui/components/callout';

# Core Visualization Features

## Transform Categories

**Transforms are organized by semantic category** for discoverability:

| Category | Purpose | Examples |
|----------|---------|----------|
| **Trend** | Moving averages, trend identification | EMA, SMA, KAMA, HMA |
| **Momentum** | Oscillators, momentum indicators | RSI, MACD, Stochastic, CCI |
| **Volatility** | Volatility measurement | ATR, Bollinger Bands, Yang-Zhang |
| **Volume** | Volume-based analysis | OBV, VWAP, Volume MA |
| **PriceAction** | Pattern recognition | Candlestick patterns, chart formations |
| **Statistical** | Statistical analysis | Z-score, correlation, regression |
| **Math** | Mathematical operations | Arithmetic, comparisons, operators |
| **DataSource** | Market data feeds | OHLCV, fundamentals, economic data |
| **ControlFlow** | Conditional logic | Conditional select, first non-null |
| **Utility** | Helper functions | String operations, switches |

<Callout type="info">
**Categories are for organization only** - they don't determine plotting behavior. Each transform has a `plotKind` that controls visualization.
</Callout>

## Auto-Plotting System

**Transforms plot automatically** based on their `plotKind` metadata:

{/* snippet: type=complete_code, needs_data=single_asset, timeframe=1D, complexity=medium */}
```python
src = market_data_source(timeframe="1D")

# Line overlay on price chart
ema_20 = ema(period=20)(src.c)

# Specialized panel (0-100 scale)
rsi_val = rsi(period=14)(src.c)

# Multi-output panel (2 lines + histogram)
mac = macd(short_period=12, long_period=26, signal_period=9)(src.c)
```

**Common Plot Types:**
- `line` - Generic overlay on price chart
- `panel_line` - Separate panel, any scale
- `rsi`, `macd`, `stoch` - Specialized panels with known scales
- `bbands` - Multi-line overlay with bands
- `vwap` - Volume-weighted overlay

<Callout type="info">
**No configuration needed** - just reference the transform output and it plots automatically.
</Callout>

---

## Event Marker System

**Mark important timestamps** for timeline navigation:

> **Note:** For requirements and common mistakes, see [Event Marker Design Guidelines](../design-guidelines#event-marker-color-maps)

{/* snippet: type=complete_code, needs_data=single_asset, complexity=simple */}
```python
src = market_data_source(timeframe="1D")

# Mark RSI extremes
rsi_val = rsi(period=14)(src.c)
oversold_event = rsi_val < 30
overbought_event = rsi_val > 70
any_event = oversold_event | overbought_event

event_type = conditional_select(
    oversold_event, "oversold_event",
    overbought_event, "overbought_event")

event_marker(
    event_marker_schema=EventMarkerSchema(
        title="RSI Events",
        select_key=SLOT0,
        icon=Signal,
        schemas=[
            CardColumnSchema(
                column_id=SLOT1,
                slot=PrimaryBadge,
                render_type=Badge,
                color_map={
                    Success: ["oversold_event"],
                    Error: ["overbought_event"]
                }
            )
        ]
    )
)(any_event, event_type)
```

**Creates interactive timeline** (click to jump to timestamp):

```text
EVENTS (Timeline)
├─ 2024-01-15 09:35  ● Oversold Event    [Success]
├─ 2024-01-15 11:20  ● Overbought Event  [Error]
├─ 2024-01-15 14:45  ● Oversold Event    [Success]
└─ 2024-01-16 10:10  ● Overbought Event  [Error]
```

### Creating Event Markers

**Color categories:**
- `Success` (Green): Bullish signals, entries, confirmations
- `Error` (Red): Bearish signals, exits, warnings
- `Warning` (Yellow): Neutral events, patterns, regime changes

**Example with full schema:**

{/* snippet: type=complete_code, needs_data=single_asset, timeframe=1D, complexity=medium */}
```python
src = market_data_source(timeframe="1D")
fast = ema(period=12)(src.c)
slow = ema(period=26)(src.c)

# Entry/exit signals
buy_signal = crossover(fast, slow)
sell_signal = crossover(slow, fast)
signal = buy_signal or sell_signal

# Event markers for signals with colored badges
signal_type = conditional_select(
    buy_signal, "BUY",
    sell_signal, "SELL")

event_marker(
    event_marker_schema=EventMarkerSchema(
        title="MA Crossover Signals",
        icon=Signal,
        select_key=SLOT0,
        schemas=[
            CardColumnSchema(
                column_id=SLOT1,
                slot=Hero,
                render_type=Badge,
                color_map={Success: ["BUY"], Error: ["SELL"]}
            )
        ]
    )
)(signal, signal_type)
```

**Timeline output:**
```text
├─ 2024-01-10 10:30  ▲ Buy Signal       [Success]
├─ 2024-01-12 14:20  ▼ Sell Signal      [Error]
├─ 2024-01-15 09:45  ▲ Buy Signal       [Success]
└─ 2024-01-17 11:15  ▼ Sell Signal      [Error]
```

### Flexible Types in `color_map`

**`color_map` accepts any value type** - strings, numbers, or booleans:

{/* snippet: type=complete_code, needs_data=single_asset, timeframe=1Min, complexity=medium */}
```python
src = market_data_source(timeframe="1Min")

# Status codes: 0=inactive, 1=warning, 2=active
status_code = number(value=2).result

# Boolean signal
is_trading = src.c > number(value=100).result

event_marker(
    event_marker_schema=EventMarkerSchema(
        title="Trading Status",
        icon=Signal,
        select_key=SLOT1,
        schemas=[
            CardColumnSchema(
                column_id=SLOT0,
                slot=Hero,
                render_type=Integer,
                color_map={
                    Success: [2],      # Integer 2 → "2"
                    Warning: [1],      # Integer 1 → "1"
                    Error: [0]         # Integer 0 → "0"
                }
            ),
            CardColumnSchema(
                column_id=SLOT1,
                slot=SecondaryBadge,
                render_type=Badge,
                color_map={
                    Info: [True]       # Boolean True → "True"
                }
            )
        ]
    )
)(status_code, is_trading)
```

**Type preservation:**
- Booleans: Use `True`/`False` directly
- Integers: Use numbers like `0`, `1`, `2`
- Decimals: Use decimals like `3.14`
- Strings: Use quoted strings like `"ACTIVE"`

<Callout type="info">
**Type matching:** The frontend will match values by type and value. Boolean `True` in your data matches `[True]` in color_map. Integer `2` matches `[2]`.
</Callout>

### Use Cases

**Strategy Development:**
- Mark all entry signals → Review each visually → Refine conditions
- Mark pattern detections → Validate accuracy → Tune parameters
- Mark regime changes → See if strategy adapts correctly

**Debugging:**
- Mark unexpected behavior → Identify problem bars
- Mark edge cases → Study what happened
- Mark false signals → Identify why they occurred

**Performance Analysis:**
- Mark all trades → Review execution
- Mark stops hit → Analyze stop placement
- Mark missed opportunities → Improve signal timing

---

**Next:** [Research Reports →](./research)
