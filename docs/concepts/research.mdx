---
title: Research Reports
page_type: implementation
layout: default
order: 3
category: Concepts
description: Research reports for gap analysis, table queries, and chart visualizations
parent: ./visualization.md
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Steps, Step } from 'fumadocs-ui/components/steps';
import { Tabs, Tab } from 'fumadocs-ui/components/tabs';

# Research Reports

## Overview

**Generate research dashboards** to analyze strategy behavior:

<Steps>
  <Step>
    ## Write Research Script

    Write research script with report transforms
  </Step>

  <Step>
    ## Run Script

    Run script → Generate reports
  </Step>

  <Step>
    ## Open Dashboard

    Open dashboard → View results
  </Step>

  <Step>
    ## Analyze & Refine

    Analyze findings → Refine strategy
  </Step>
</Steps>

---

## Gap Reports

Comprehensive gap analysis with summary cards, histograms, and detailed tables.

### Required Inputs

The `gap_report` transform requires **all 5 outputs** from `session_gap` or `bar_gap`:

```python
# Get gap detection outputs
gaps = session_gap(fill_percent=100, timeframe="1Min")()

# Pass all 5 required outputs to gap_report
gap_report(fill_time_pivot_hour=12, histogram_bins=15)(
    gaps.gap_filled,      # Boolean: Was gap filled?
    gaps.gap_retrace,     # Boolean: Did price retrace into gap?
    gaps.gap_size,        # Decimal: Gap size in price units
    gaps.psc,             # Decimal: Previous session close
    gaps.psc_timestamp    # Timestamp: When gap formed
)
```

### Dashboard Components

**Summary Cards:**
- Fill Rate: 67.3%
- Average Gap Size: 1.24%
- Median Fill Time: 42 minutes
- Total Gaps: 1,247

**Histograms:**
- Gap Size Distribution (bins: 0-0.5%, 0.5-1%, 1-1.5%, etc.)
- Fill Time Distribution (bins: 0-15min, 15-30min, 30-60min, etc.)

**Tables:**
- Gaps by Hour (pivot table)
- Gaps by Day of Week
- Gaps by Size Bucket
- Detailed gap log (timestamp, size, fill time, filled?)

### Common Patterns

**Analyze gaps by session:**

<Tabs items={['Asian Session', 'London Session']}>
  <Tab value="Asian Session">
    ```python
    # Asian session gaps
    asian_gaps = session_gap(fill_percent=100, session="AsianKillZone")()
    gap_report(fill_time_pivot_hour=12)(
        asian_gaps.gap_filled,
        asian_gaps.gap_retrace,
        asian_gaps.gap_size,
        asian_gaps.psc,
        asian_gaps.psc_timestamp
    )
    ```
  </Tab>

  <Tab value="London Session">
    ```python
    # London session gaps
    london_gaps = session_gap(fill_percent=100, session="LondonKillZone")()
    gap_report(fill_time_pivot_hour=12)(
        london_gaps.gap_filled,
        london_gaps.gap_retrace,
        london_gaps.gap_size,
        london_gaps.psc,
        london_gaps.psc_timestamp
    )
    ```
  </Tab>
</Tabs>

---

## Table Reports

Display filtered rows from your data in a table format.

### Basic Usage

```python
# Display RSI extreme conditions
src = market_data_source()
returns = (src.c - src.c[1]) / src.c[1]
rsi_val = rsi(period=14)(src.c)
volume = src.v

# Create boolean filter for extreme RSI
oversold = rsi_val < 30
overbought = rsi_val > 70
extreme_rsi = oversold or overbought

# Create regime labels
regime_label = conditional_select(
    oversold, "Oversold",
    overbought, "Overbought",
    "Neutral"
)

table_report(schema=TableReportSchema(
    title="RSI Extreme Conditions",
    select_key=SLOT0,  # Boolean column for filtering
    columns=[
        TableColumnSchema(column_id=SLOT1, title="Regime"),
        TableColumnSchema(column_id=SLOT2, title="RSI"),
        TableColumnSchema(column_id=SLOT3, title="Return"),
        TableColumnSchema(column_id=SLOT4, title="Volume")
    ]
))(extreme_rsi, regime_label, rsi_val, returns, volume)
```

**Dashboard table:**
```text
┌───────────┬──────┬─────────┬─────────┐
│ Regime    │ RSI  │ Return  │ Volume  │
├───────────┼──────┼─────────┼─────────┤
│ Oversold  │ 28.5 │ +0.42%  │ 3.2M    │
│ Oversold  │ 25.1 │ +1.15%  │ 4.1M    │
│ Overbought│ 72.3 │ -0.18%  │ 2.8M    │
│ Overbought│ 75.8 │ -0.65%  │ 3.5M    │
└───────────┴──────┴─────────┴─────────┘
```

### Schema Configuration

**Inputs are accessed as SLOT0, SLOT1, SLOT2, etc. by position:**

```python
# Inputs map to SLOT columns by position
returns = (src.c - src.c[1]) / src.c[1]
rsi_val = rsi(period=14)(src.c)
signal = rsi_val > 70

table_report(schema=TableReportSchema(
    title="My Table",
    select_key=SLOT0,  # signal (boolean filter)
    columns=[
        TableColumnSchema(column_id=SLOT1, title="Return"),  # returns
        TableColumnSchema(column_id=SLOT2, title="RSI")      # rsi_val
    ]
))(signal, returns, rsi_val)
```

<Callout type="warning" title="Use SLOT* Column Names">
Schema must reference inputs as SLOT0, SLOT1, SLOT2, etc.:

```python
src = market_data_source()
signal = src.c > src.o

# ❌ WRONG: Using variable names
table_report(schema=TableReportSchema(
    select_key="signal",  # Variable name won't work
    ...
))

# ✅ CORRECT: Use SLOT0
table_report(schema=TableReportSchema(
    select_key=SLOT0,  # First input is SLOT0
    ...
))(signal, ...)
```
</Callout>

### Common Patterns

**Simple filtering:**

```python
src = market_data_source()
returns = (src.c - src.c[1]) / src.c[1]
rsi_val = rsi(period=14)(src.c)
oversold = rsi_val < 30
overbought = rsi_val > 70
extreme_condition = oversold or overbought
regime_label = conditional_select(
    oversold, "Oversold",
    overbought, "Overbought",
    "Neutral"
)

table_report(schema=TableReportSchema(
    title="Extreme RSI Conditions",
    select_key=SLOT0,
    columns=[
        TableColumnSchema(column_id=SLOT1, title="Regime"),
        TableColumnSchema(column_id=SLOT2, title="Return"),
        TableColumnSchema(column_id=SLOT3, title="RSI Value")
    ]
))(extreme_condition, regime_label, returns, rsi_val)
```

**Pattern detection:**

```python
# Show only rows where pattern is detected
bullish_pattern = marubozu_bullish()()

table_report(schema=TableReportSchema(
    title="Bullish Patterns",
    select_key=SLOT0,  # Pattern detected boolean
    columns=[
        TableColumnSchema(column_id=SLOT1, title="Close"),
        TableColumnSchema(column_id=SLOT2, title="Volume")
    ]
))(bullish_pattern, src.c, src.v)
```

**Multiple conditions:**

```python
# Combine multiple conditions
high_volume = src.v > ema(period=20)(src.v)
price_breakout = src.c > highest(period=20)(src.c[1])
signal = high_volume & price_breakout

table_report(schema=TableReportSchema(
    title="Breakout Signals",
    select_key=SLOT0,
    columns=[
        TableColumnSchema(column_id=SLOT1, title="Price"),
        TableColumnSchema(column_id=SLOT2, title="Volume")
    ]
))(signal, src.c, src.v)
```

<Callout type="tip" title="Filtering Rows">
The `select_key` parameter specifies a boolean column - only rows where this column is `true` are displayed in the table.
</Callout>

---

## Chart Reports

Visual reports for distribution and relationship analysis.

### Histogram Reports

**Distribution visualization:**

```python
# Return distribution
returns = (src.c - src.c[1]) / src.c[1]
histogram_chart_report(bins=20, title="Return Distribution")(
    returns=returns
)
```

**Parameters:**
- `bins`: Number of histogram bins
- `title`: Chart title

### Bar Chart Reports

**Categorical comparisons:**

```python
# Count by regime
rsi_val = rsi(period=14)(src.c)
regime = conditional_select(
    rsi_val < 30, "Oversold",
    rsi_val > 70, "Overbought",
    "Neutral"
)

bar_chart_report(x="regime", y="count", title="Bars by Regime")(
    regime=regime
)
```

**Parameters:**
- `x`: X-axis column name
- `y`: Y-axis aggregation (count, sum, avg, etc.)
- `title`: Chart title

### Pie Chart Reports

**Proportion visualization:**

```python
# Market regime proportions
pie_chart_report(category="regime", value="count", title="Regime Distribution")(
    regime=regime
)
```

**Parameters:**
- `category`: Column for pie segments
- `value`: Aggregation method
- `title`: Chart title

### Line Chart Reports

**Time series and trends:**

```python
# Average volume by hour
hour = extract_hour(src.t)
volume = src.v

lines_chart_report(x="hour", y="volume", title="Hourly Volume Pattern")(
    hour=hour,
    volume=volume
)
```

**Parameters:**
- `x`: X-axis column (typically time or sequence)
- `y`: Y-axis value
- `title`: Chart title

### Scatter Plot Reports

**Relationship analysis:**

```python
# RSI vs Returns
rsi_val = rsi(period=14)(src.c)
returns = (src.c - src.c[1]) / src.c[1]

scatter_chart_report(x="rsi_val", y="returns", title="RSI vs Returns")(
    rsi_val=rsi_val,
    returns=returns
)
```

**Parameters:**
- `x`: X-axis variable
- `y`: Y-axis variable
- `title`: Chart title

---

## Multiple Reports

**Combine multiple reports** in a single research script:

```python
src = market_data_source()
gaps = session_gap(fill_percent=100, timeframe="1Min")()
rsi_val = rsi(period=14)(src.c)
returns = (src.c - src.c[1]) / src.c[1]

# Gap analysis
gap_report(fill_time_pivot_hour=12)(
    gaps.gap_filled,
    gaps.gap_retrace,
    gaps.gap_size,
    gaps.psc,
    gaps.psc_timestamp
)

# RSI regime analysis
oversold = rsi_val < 30
overbought = rsi_val > 70
extreme_rsi = oversold or overbought
regime_label = conditional_select(
    oversold, "Oversold",
    overbought, "Overbought",
    "Neutral"
)

table_report(schema=TableReportSchema(
    title="Extreme RSI Analysis",
    select_key=SLOT0,
    columns=[
        TableColumnSchema(column_id=SLOT1, title="RSI"),
        TableColumnSchema(column_id=SLOT2, title="Regime"),
        TableColumnSchema(column_id=SLOT3, title="Return")
    ]
))(extreme_rsi, rsi_val, regime_label, returns)
```

All reports appear in the dashboard with separate sections.

---

**Previous:** [Core Features ←](./core-features)
